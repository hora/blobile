(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"7wo0":function(e,n,t){"use strict";t.r(n),t.d(n,"SettingsPageModule",(function(){return j}));var i=t("ofXK"),o=t("3Pt+"),a=t("TEn/"),c=t("tyNb"),r=t("mrSG"),s=t("gcOT"),l=t("NldC"),b=t("fXoL"),d=t("J+wX"),u=t("EPm9"),g=t("BTjV"),h=t("tRi0"),f=t("CuFv");function v(e,n){if(1&e&&(b.Nb(0,"ion-item"),b.Nb(1,"ion-label",12),b.kc(2),b.Mb(),b.Lb(3,"ion-progress-bar",13),b.Mb()),2&e){const e=b.Xb(2);b.zb(2),b.mc("",e.updateService.phase,":"),b.zb(1),b.bc("value",e.updateService.percentDone)}}function M(e,n){if(1&e){const e=b.Ob();b.Nb(0,"ion-item",14),b.Nb(1,"ion-label",5),b.kc(2,"You have an update ready."),b.Mb(),b.Nb(3,"ion-button",15),b.Ub("click",(function(){return b.dc(e),b.Xb(2).updateService.reload()})),b.kc(4,"Reload"),b.Mb(),b.Mb()}}function m(e,n){if(1&e){const e=b.Ob();b.Nb(0,"ion-toggle",10),b.Ub("ionChange",(function(){return b.dc(e),b.Xb(2).setBoolean("disableSleep")}))("ngModelChange",(function(n){return b.dc(e),b.Xb(2).current.disableSleep=n})),b.Mb()}if(2&e){const e=b.Xb(2);b.ac("ngModel",e.current.disableSleep)}}function p(e,n){if(1&e){const e=b.Ob();b.Nb(0,"span"),b.Nb(1,"ion-list-header",4),b.Nb(2,"h3"),b.kc(3,"Automatic Updates"),b.Mb(),b.Mb(),b.Nb(4,"ion-item"),b.Nb(5,"ion-label",5),b.kc(6,"Receive beta updates?"),b.Mb(),b.Nb(7,"ion-toggle",10),b.Ub("ionChange",(function(){return b.dc(e),b.Xb().setBeta()}))("ngModelChange",(function(n){return b.dc(e),b.Xb().betaEnabled=n})),b.Mb(),b.Mb(),b.jc(8,v,4,2,"ion-item",3),b.jc(9,M,5,0,"ion-item",11),b.Nb(10,"ion-list-header",4),b.Nb(11,"h3"),b.kc(12,"Disable Sleep"),b.Mb(),b.Mb(),b.Nb(13,"ion-item"),b.Nb(14,"ion-label",5),b.kc(15,"Disable sleep while games are active?"),b.Mb(),b.jc(16,m,1,1,"ion-toggle",6),b.Mb(),b.Mb()}if(2&e){const e=b.Xb();b.zb(7),b.ac("ngModel",e.betaEnabled),b.zb(1),b.ac("ngIf",e.updateService.updateAvailable&&!e.updateService.updateReady&&e.updateService.percentDone),b.zb(1),b.ac("ngIf",e.updateService.updateReady),b.zb(7),b.ac("ngIf",e.current)}}function N(e,n){if(1&e){const e=b.Ob();b.Nb(0,"ion-toggle",10),b.Ub("ionChange",(function(){return b.dc(e),b.Xb().setBoolean("reduceMotion")}))("ngModelChange",(function(n){return b.dc(e),b.Xb().current.reduceMotion=n})),b.Mb()}if(2&e){const e=b.Xb();b.ac("ngModel",e.current.reduceMotion)}}function y(e,n){if(1&e){const e=b.Ob();b.Nb(0,"ion-toggle",10),b.Ub("ionChange",(function(){return b.dc(e),b.Xb().setBoolean("darkMode")}))("ngModelChange",(function(n){return b.dc(e),b.Xb().current.darkMode=n})),b.Mb()}if(2&e){const e=b.Xb();b.ac("ngModel",e.current.darkMode)}}function C(e,n){if(1&e){const e=b.Ob();b.Nb(0,"ion-toggle",10),b.Ub("ionChange",(function(){return b.dc(e),b.Xb().setBoolean("audio")}))("ngModelChange",(function(n){return b.dc(e),b.Xb().current.audio=n})),b.Mb()}if(2&e){const e=b.Xb();b.ac("ngModel",e.current.audio)}}function S(e,n){if(1&e){const e=b.Ob();b.Nb(0,"ion-range",16),b.Ub("ionChange",(function(n){return b.dc(e),b.Xb().setVolume(n)}))("ngModelChange",(function(n){return b.dc(e),b.Xb().volume=n})),b.Mb()}if(2&e){const e=b.Xb();b.ac("ngModel",e.volume)}}function k(e,n){if(1&e&&(b.Nb(0,"ion-select-option",13),b.kc(1),b.Mb()),2&e){const e=n.$implicit;b.ac("value",e.id),b.zb(1),b.lc(e.fullName)}}function O(e,n){if(1&e){const e=b.Ob();b.Nb(0,"ion-select",17),b.Ub("ionChange",(function(n){return b.dc(e),b.Xb().setString("favoriteTeam",n)}))("ngModelChange",(function(n){return b.dc(e),b.Xb().current.favoriteTeam=n})),b.jc(1,k,2,2,"ion-select-option",18),b.Mb()}if(2&e){const e=b.Xb();b.ac("interfaceOptions",e.teamOptions)("ngModel",e.current.favoriteTeam),b.zb(1),b.ac("ngForOf",e.teams)("ngForTrackBy",e.id)}}const{Device:I}=s.a,X=[{path:"",component:(()=>{class e{constructor(e,n,t,i,o,a){this.database=e,this.deploy=n,this.platform=t,this.settings=i,this.updateService=o,this.voiceService=a,this.betaEnabled=!1,this.devicePlatform="web",this.hasSpeech=!1,this.teamOptions={header:"Choose Your Team"},this.voiceOptions={header:"Choose a Voice"},this.id=l.a.trackById,this.hasSpeech=void 0!==window.speechSynthesis}ngOnInit(){return Object(r.a)(this,void 0,void 0,(function*(){yield this.platform.ready(),console.debug("SettingsPage.ngOnInit()");try{const e=yield I.getInfo();this.devicePlatform=e.platform,console.debug("SettingsPage.ngOnInit(): platform="+this.devicePlatform)}catch(e){console.error("SettingsPage.ngOnInit(): failed to get device info:",e)}if("web"!==this.devicePlatform)try{const e=yield this.deploy.getConfiguration();this.betaEnabled="beta"===e.channel.toLowerCase(),console.debug("SettingsPage.ngOnInit(): betaEnabled="+this.betaEnabled)}catch(e){console.error("SettingsPage.ngOnInit(): failed to get deploy configuration:",e)}this.teams=(yield this.database.teams()).sort((e,n)=>e.fullName<n.fullName?-1:e.fullName>n.fullName?1:0),this.current=yield this.settings.getAll(),this.volume=Math.round(1e3*this.current.volume),this.voices=this.voiceService.voices(),this.voice=yield this.voiceService.voice(this.current.voice),console.debug("SettingsPage.onInit(): current settings=",this.current)}))}isBeta(){return Object(r.a)(this,void 0,void 0,(function*(){return"beta"===(yield this.deploy.getConfiguration()).channel.toLowerCase()}))}setBeta(){return Object(r.a)(this,void 0,void 0,(function*(){return yield this.deploy.configure({channel:this.betaEnabled?"Beta":"Stable"}),yield this.isBeta()}))}getTeamName(e){const n=this.teams.find(n=>n.id===e);return n?n.fullName:""}setBoolean(e){return Object(r.a)(this,void 0,void 0,(function*(){return yield this.settings.setBoolean(e,this.current[e])}))}setString(e,n){return Object(r.a)(this,void 0,void 0,(function*(){return console.debug("setString: key=",e),console.debug("setString: ev=",n),yield this.settings.setString(e,this.current[e])}))}setVolume(e){return Object(r.a)(this,void 0,void 0,(function*(){return yield this.settings.setNumber("volume",e.detail.value/1e3)}))}setVoice(e){var n,t;return Object(r.a)(this,void 0,void 0,(function*(){(yield this.voiceService.voice(null===(n=null==e?void 0:e.detail)||void 0===n?void 0:n.value))?(yield this.settings.setVoice(e.detail.value),this.speak()):console.error("Unable to locate voice: "+(null===(t=null==e?void 0:e.detail)||void 0===t?void 0:t.value))}))}speak(e){return Object(r.a)(this,void 0,void 0,(function*(){return null==e||e.preventDefault(),null==e||e.stopPropagation(),this.voiceService.say("The commissioner is doing a great job!",{force:!0})}))}setFavoriteTeam(e){return Object(r.a)(this,void 0,void 0,(function*(){const n=this.teams.find(n=>n.id===e.value);this.settings.setFavoriteTeam(null==n?void 0:n.id)}))}}return e.\u0275fac=function(n){return new(n||e)(b.Kb(d.a),b.Kb(u.a),b.Kb(a.Eb),b.Kb(g.a),b.Kb(h.a),b.Kb(f.a))},e.\u0275cmp=b.Eb({type:e,selectors:[["app-settings"]],decls:40,vars:7,consts:[[3,"translucent"],["color","primary"],["lines","none",1,"ion-text-wrap"],[4,"ngIf"],["lines","full"],[1,"ion-text-wrap"],["slot","end",3,"ngModel","ionChange","ngModelChange",4,"ngIf"],["min","0","max","1000","debounce","200","slot","end",3,"ngModel","ionChange","ngModelChange",4,"ngIf"],["id","bl-team-selector"],["class","ion-text-wrap","interface","action-sheet","okText","Choose","cancelText","Cancel",3,"interfaceOptions","ngModel","ionChange","ngModelChange",4,"ngIf"],["slot","end",3,"ngModel","ionChange","ngModelChange"],["color","danger",4,"ngIf"],["slot","start"],[3,"value"],["color","danger"],["slot","end","color","light",3,"click"],["min","0","max","1000","debounce","200","slot","end",3,"ngModel","ionChange","ngModelChange"],["interface","action-sheet","okText","Choose","cancelText","Cancel",1,"ion-text-wrap",3,"interfaceOptions","ngModel","ionChange","ngModelChange"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"]],template:function(e,n){1&e&&(b.Nb(0,"ion-header",0),b.Nb(1,"ion-toolbar",1),b.Nb(2,"ion-title"),b.kc(3,"Slettings"),b.Mb(),b.Mb(),b.Mb(),b.Nb(4,"ion-content"),b.Nb(5,"ion-list",2),b.jc(6,p,17,4,"span",3),b.Nb(7,"ion-list-header",4),b.Nb(8,"h3"),b.kc(9,"Interface"),b.Mb(),b.Mb(),b.Nb(10,"ion-item"),b.Nb(11,"ion-label",5),b.kc(12,"Reduce motion in effects?"),b.Mb(),b.jc(13,N,1,1,"ion-toggle",6),b.Mb(),b.Nb(14,"ion-item"),b.Nb(15,"ion-label",5),b.kc(16,"Always use dark mode?"),b.Mb(),b.jc(17,y,1,1,"ion-toggle",6),b.Mb(),b.Nb(18,"ion-list-header",4),b.Nb(19,"h3"),b.kc(20,"Audio"),b.Mb(),b.Mb(),b.Nb(21,"ion-item"),b.Nb(22,"ion-label",5),b.kc(23,"Enable Sound Effects?"),b.Mb(),b.jc(24,C,1,1,"ion-toggle",6),b.Mb(),b.Nb(25,"ion-item"),b.Nb(26,"ion-label",5),b.kc(27,"Volume:"),b.Mb(),b.jc(28,S,1,1,"ion-range",7),b.Mb(),b.Nb(29,"ion-list-header",4),b.Nb(30,"h3"),b.kc(31,"Teams"),b.Mb(),b.Mb(),b.Nb(32,"ion-item",8),b.Nb(33,"ion-label",5),b.Nb(34,"ion-label"),b.Nb(35,"h4"),b.kc(36,"Choose Your Team:"),b.Mb(),b.Mb(),b.Nb(37,"ion-note"),b.kc(38,"Your team is first in the live feed."),b.Mb(),b.Mb(),b.jc(39,O,2,4,"ion-select",9),b.Mb(),b.Mb(),b.Mb()),2&e&&(b.ac("translucent",!0),b.zb(6),b.ac("ngIf","web"!==n.devicePlatform),b.zb(7),b.ac("ngIf",n.current),b.zb(4),b.ac("ngIf",n.current),b.zb(7),b.ac("ngIf",n.current),b.zb(4),b.ac("ngIf",n.current),b.zb(11),b.ac("ngIf",n.current&&n.teams))},directives:[a.y,a.wb,a.ub,a.r,a.L,i.t,a.M,a.E,a.K,a.S,a.vb,a.a,o.j,o.m,a.T,a.h,a.W,a.Hb,a.hb,i.s,a.ib],styles:[""]}),e})()}];let w=(()=>{class e{}return e.\u0275mod=b.Ib({type:e}),e.\u0275inj=b.Hb({factory:function(n){return new(n||e)},imports:[[c.l.forChild(X)],c.l]}),e})(),j=(()=>{class e{}return e.\u0275mod=b.Ib({type:e}),e.\u0275inj=b.Hb({factory:function(n){return new(n||e)},imports:[[i.c,o.e,a.yb,w]]}),e})()}}]);