(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"7wo0":function(e,n,t){"use strict";t.r(n),t.d(n,"SettingsPageModule",(function(){return B}));var i=t("ofXK"),o=t("3Pt+"),c=t("TEn/"),a=t("tyNb"),r=t("mrSG"),s=t("gcOT"),b=t("NldC"),l=t("fXoL"),u=t("J+wX"),d=t("EPm9"),g=t("BTjV"),f=t("tRi0"),h=t("CuFv");function m(e,n){1&e&&(l.Nb(0,"ion-button"),l.Lb(1,"ion-spinner"),l.Mb())}function v(e,n){if(1&e){const e=l.Ob();l.Nb(0,"ion-toggle",12),l.Vb("ionChange",(function(){return l.fc(e),l.Zb(2).setBetaEnabled()}))("ngModelChange",(function(n){return l.fc(e),l.Zb(2).current.betaEnabled=n})),l.Mb()}if(2&e){const e=l.Zb(2);l.cc("ngModel",e.current.betaEnabled)}}function M(e,n){if(1&e&&(l.Nb(0,"ion-item"),l.Nb(1,"ion-label",13),l.mc(2),l.Mb(),l.Lb(3,"ion-progress-bar",14),l.Mb()),2&e){const e=l.Zb(2);l.zb(2),l.oc("",e.updateService.phase,":"),l.zb(1),l.dc("value",e.updateService.percentDone)}}function p(e,n){if(1&e){const e=l.Ob();l.Nb(0,"ion-item",15),l.Nb(1,"ion-label",6),l.mc(2,"You have an update ready."),l.Mb(),l.Nb(3,"ion-button",16),l.Vb("click",(function(){return l.fc(e),l.Zb(2).updateService.reload()})),l.mc(4,"Reload"),l.Mb(),l.Mb()}}function N(e,n){if(1&e){const e=l.Ob();l.Nb(0,"ion-toggle",12),l.Vb("ionChange",(function(){return l.fc(e),l.Zb(2).setBoolean("disableSleep")}))("ngModelChange",(function(n){return l.fc(e),l.Zb(2).current.disableSleep=n})),l.Mb()}if(2&e){const e=l.Zb(2);l.cc("ngModel",e.current.disableSleep)}}function C(e,n){if(1&e&&(l.Nb(0,"span"),l.Nb(1,"ion-list-header",5),l.Nb(2,"h3"),l.mc(3,"Automatic Updates"),l.Mb(),l.Mb(),l.Nb(4,"ion-item"),l.Nb(5,"ion-label",6),l.mc(6,"Receive beta updates?"),l.Mb(),l.lc(7,v,1,1,"ion-toggle",7),l.Mb(),l.lc(8,M,4,2,"ion-item",3),l.lc(9,p,5,0,"ion-item",11),l.Nb(10,"ion-list-header",5),l.Nb(11,"h3"),l.mc(12,"Disable Sleep"),l.Mb(),l.Mb(),l.Nb(13,"ion-item"),l.Nb(14,"ion-label",6),l.mc(15,"Disable sleep while games are active?"),l.Mb(),l.lc(16,N,1,1,"ion-toggle",7),l.Mb(),l.Mb()),2&e){const e=l.Zb();l.zb(7),l.cc("ngIf",e.current),l.zb(1),l.cc("ngIf",e.updateService.updateAvailable&&!e.updateService.updateReady&&e.updateService.percentDone),l.zb(1),l.cc("ngIf",e.updateService.updateReady),l.zb(7),l.cc("ngIf",e.current)}}function O(e,n){if(1&e){const e=l.Ob();l.Nb(0,"ion-toggle",12),l.Vb("ionChange",(function(){return l.fc(e),l.Zb().setBoolean("reduceMotion")}))("ngModelChange",(function(n){return l.fc(e),l.Zb().current.reduceMotion=n})),l.Mb()}if(2&e){const e=l.Zb();l.cc("ngModel",e.current.reduceMotion)}}function y(e,n){if(1&e){const e=l.Ob();l.Nb(0,"ion-toggle",12),l.Vb("ionChange",(function(){l.fc(e);const n=l.Zb();return n.settings.setDarkMode(n.current.darkMode)}))("ngModelChange",(function(n){return l.fc(e),l.Zb().current.darkMode=n})),l.Mb()}if(2&e){const e=l.Zb();l.cc("ngModel",e.current.darkMode)}}function S(e,n){if(1&e){const e=l.Ob();l.Nb(0,"ion-toggle",12),l.Vb("ionChange",(function(){return l.fc(e),l.Zb().setBoolean("audio")}))("ngModelChange",(function(n){return l.fc(e),l.Zb().current.audio=n})),l.Mb()}if(2&e){const e=l.Zb();l.cc("ngModel",e.current.audio)}}function I(e,n){if(1&e){const e=l.Ob();l.Nb(0,"ion-range",17),l.Vb("ionChange",(function(n){return l.fc(e),l.Zb().setVolume(n)}))("ngModelChange",(function(n){return l.fc(e),l.Zb().volume=n})),l.Mb()}if(2&e){const e=l.Zb();l.cc("ngModel",e.volume)}}function Z(e,n){if(1&e){const e=l.Ob();l.Nb(0,"ion-toggle",12),l.Vb("ionChange",(function(){return l.fc(e),l.Zb(2).setBoolean("speech")}))("ngModelChange",(function(n){return l.fc(e),l.Zb(2).current.speech=n})),l.Mb()}if(2&e){const e=l.Zb(2);l.cc("ngModel",e.current.speech)}}function w(e,n){if(1&e&&(l.Nb(0,"ion-item"),l.Nb(1,"ion-label",6),l.mc(2,"Enable Speech?"),l.Mb(),l.lc(3,Z,1,1,"ion-toggle",7),l.Mb()),2&e){const e=l.Zb();l.zb(3),l.cc("ngIf",e.current)}}function T(e,n){if(1&e&&(l.Nb(0,"ion-select-option",14),l.mc(1),l.Mb()),2&e){const e=n.$implicit;l.cc("value",e.voiceURI),l.zb(1),l.nc(e.name)}}function k(e,n){if(1&e){const e=l.Ob();l.Nb(0,"ion-select",20),l.Vb("ionChange",(function(n){return l.fc(e),l.Zb(2).setVoice(n)})),l.lc(1,T,2,2,"ion-select-option",21),l.Mb()}if(2&e){const e=l.Zb(2);l.cc("interfaceOptions",e.voiceOptions)("value",e.current.voice),l.zb(1),l.cc("ngForOf",e.voices)}}function z(e,n){if(1&e){const e=l.Ob();l.Nb(0,"ion-item"),l.Nb(1,"ion-icon",18),l.Vb("click",(function(n){return l.fc(e),l.Zb().speak(n)})),l.Mb(),l.Nb(2,"ion-label",6),l.mc(3,"Voice:"),l.Mb(),l.lc(4,k,2,3,"ion-select",19),l.Mb()}if(2&e){const e=l.Zb();l.zb(4),l.cc("ngIf",e.current&&e.voice)}}function V(e,n){if(1&e&&(l.Nb(0,"ion-select-option",14),l.mc(1),l.Mb()),2&e){const e=n.$implicit;l.cc("value",e.id),l.zb(1),l.nc(e.fullName)}}function E(e,n){if(1&e){const e=l.Ob();l.Nb(0,"ion-select",22),l.Vb("ionChange",(function(n){return l.fc(e),l.Zb().setString("favoriteTeam",n)}))("ngModelChange",(function(n){return l.fc(e),l.Zb().current.favoriteTeam=n})),l.lc(1,V,2,2,"ion-select-option",23),l.Mb()}if(2&e){const e=l.Zb();l.cc("interfaceOptions",e.teamOptions)("ngModel",e.current.favoriteTeam),l.zb(1),l.cc("ngForOf",e.teams)("ngForTrackBy",e.id)}}const{Device:x}=s.a,P=[{path:"",component:(()=>{class e{constructor(e,n,t,i,o,c){this.database=e,this.deploy=n,this.platform=t,this.settings=i,this.updateService=o,this.voiceService=c,this.loading=!0,this.betaEnabled=!1,this.devicePlatform="web",this.hasSpeech=!1,this.teamOptions={header:"Choose Your Team"},this.voiceOptions={header:"Choose a Voice"},this.id=b.a.trackById,this.hasSpeech=void 0!==window.speechSynthesis}ngOnInit(){return Object(r.a)(this,void 0,void 0,(function*(){yield this.platform.ready(),console.debug("SettingsPage.ngOnInit()");try{const e=yield x.getInfo();this.devicePlatform=e.platform,console.debug("SettingsPage.ngOnInit(): platform="+this.devicePlatform)}catch(e){console.error("SettingsPage.ngOnInit(): failed to get device info:",e)}if("web"!==this.devicePlatform)try{const e=yield this.deploy.getConfiguration();this.betaEnabled="beta"===e.channel.toLowerCase(),console.debug("SettingsPage.ngOnInit(): betaEnabled="+this.betaEnabled)}catch(e){console.error("SettingsPage.ngOnInit(): failed to get deploy configuration:",e)}this.current=yield this.settings.getAll(),this.volume=Math.round(1e3*this.current.volume),this.teams=(yield this.database.teams()).sort((e,n)=>e.fullName<n.fullName?-1:e.fullName>n.fullName?1:0),this.voices=this.voiceService.voices(),this.voice=yield this.voiceService.voice(this.current.voice),this.loading=!1,console.debug("SettingsPage.onInit(): current settings=",this.current)}))}setBetaEnabled(){return Object(r.a)(this,void 0,void 0,(function*(){return yield this.settings.setBetaEnabled(this.current.betaEnabled)}))}getTeamName(e){const n=this.teams.find(n=>n.id===e);return n?n.fullName:""}setBoolean(e){return Object(r.a)(this,void 0,void 0,(function*(){return yield this.settings.setBoolean(e,this.current[e])}))}setString(e,n){return Object(r.a)(this,void 0,void 0,(function*(){return console.debug("setString: key=",e),console.debug("setString: ev=",n),yield this.settings.setString(e,this.current[e])}))}setVolume(e){return Object(r.a)(this,void 0,void 0,(function*(){return yield this.settings.setNumber("volume",e.detail.value/1e3)}))}setVoice(e){var n,t;return Object(r.a)(this,void 0,void 0,(function*(){(yield this.voiceService.voice(null===(n=null==e?void 0:e.detail)||void 0===n?void 0:n.value))?(yield this.settings.setVoice(e.detail.value),this.speak()):console.error("Unable to locate voice: "+(null===(t=null==e?void 0:e.detail)||void 0===t?void 0:t.value))}))}speak(e){return Object(r.a)(this,void 0,void 0,(function*(){return null==e||e.preventDefault(),null==e||e.stopPropagation(),this.voiceService.say("The commissioner is doing a great job!",{force:!0})}))}setFavoriteTeam(e){return Object(r.a)(this,void 0,void 0,(function*(){const n=this.teams.find(n=>n.id===e.value);this.settings.setFavoriteTeam(null==n?void 0:n.id)}))}}return e.\u0275fac=function(n){return new(n||e)(l.Kb(u.a),l.Kb(d.a),l.Kb(c.Eb),l.Kb(g.a),l.Kb(f.a),l.Kb(h.a))},e.\u0275cmp=l.Eb({type:e,selectors:[["app-settings"]],decls:44,vars:10,consts:[[3,"translucent"],["color","primary"],["slot","secondary"],[4,"ngIf"],["lines","none",1,"ion-text-wrap"],["lines","full"],[1,"ion-text-wrap"],["slot","end",3,"ngModel","ionChange","ngModelChange",4,"ngIf"],["min","0","max","1000","debounce","200","slot","end",3,"ngModel","ionChange","ngModelChange",4,"ngIf"],["id","bl-team-selector"],["class","ion-text-wrap","interface","action-sheet","okText","Choose","cancelText","Cancel",3,"interfaceOptions","ngModel","ionChange","ngModelChange",4,"ngIf"],["color","danger",4,"ngIf"],["slot","end",3,"ngModel","ionChange","ngModelChange"],["slot","start"],[3,"value"],["color","danger"],["slot","end","color","light",3,"click"],["min","0","max","1000","debounce","200","slot","end",3,"ngModel","ionChange","ngModelChange"],["name","volume-high-outline","slot","start",1,"ion-no-margin",2,"margin-right","0.5em",3,"click"],["class","ion-text-wrap","interface","action-sheet","okText","Choose","cancelText","Cancel",3,"interfaceOptions","value","ionChange",4,"ngIf"],["interface","action-sheet","okText","Choose","cancelText","Cancel",1,"ion-text-wrap",3,"interfaceOptions","value","ionChange"],[3,"value",4,"ngFor","ngForOf"],["interface","action-sheet","okText","Choose","cancelText","Cancel",1,"ion-text-wrap",3,"interfaceOptions","ngModel","ionChange","ngModelChange"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"]],template:function(e,n){1&e&&(l.Nb(0,"ion-header",0),l.Nb(1,"ion-toolbar",1),l.Nb(2,"ion-title"),l.mc(3,"Slettings"),l.Mb(),l.Nb(4,"ion-buttons",2),l.lc(5,m,2,0,"ion-button",3),l.Mb(),l.Mb(),l.Mb(),l.Nb(6,"ion-content"),l.Nb(7,"ion-list",4),l.lc(8,C,17,4,"span",3),l.Nb(9,"ion-list-header",5),l.Nb(10,"h3"),l.mc(11,"Interface"),l.Mb(),l.Mb(),l.Nb(12,"ion-item"),l.Nb(13,"ion-label",6),l.mc(14,"Reduce motion in effects?"),l.Mb(),l.lc(15,O,1,1,"ion-toggle",7),l.Mb(),l.Nb(16,"ion-item"),l.Nb(17,"ion-label",6),l.mc(18,"Always use dark mode?"),l.Mb(),l.lc(19,y,1,1,"ion-toggle",7),l.Mb(),l.Nb(20,"ion-list-header",5),l.Nb(21,"h3"),l.mc(22,"Audio"),l.Mb(),l.Mb(),l.Nb(23,"ion-item"),l.Nb(24,"ion-label",6),l.mc(25,"Enable Sound Effects?"),l.Mb(),l.lc(26,S,1,1,"ion-toggle",7),l.Mb(),l.Nb(27,"ion-item"),l.Nb(28,"ion-label",6),l.mc(29,"Volume:"),l.Mb(),l.lc(30,I,1,1,"ion-range",8),l.Mb(),l.lc(31,w,4,1,"ion-item",3),l.lc(32,z,5,1,"ion-item",3),l.Nb(33,"ion-list-header",5),l.Nb(34,"h3"),l.mc(35,"Teams"),l.Mb(),l.Mb(),l.Nb(36,"ion-item",9),l.Nb(37,"ion-label",6),l.Nb(38,"ion-label"),l.Nb(39,"h4"),l.mc(40,"Choose Your Team:"),l.Mb(),l.Mb(),l.Nb(41,"ion-note"),l.mc(42,"Your team is first in the live feed."),l.Mb(),l.Mb(),l.lc(43,E,2,4,"ion-select",10),l.Mb(),l.Mb(),l.Mb()),2&e&&(l.cc("translucent",!0),l.zb(5),l.cc("ngIf",n.loading),l.zb(3),l.cc("ngIf","web"!==n.devicePlatform),l.zb(7),l.cc("ngIf",n.current),l.zb(4),l.cc("ngIf",n.current),l.zb(7),l.cc("ngIf",n.current),l.zb(4),l.cc("ngIf",n.current),l.zb(1),l.cc("ngIf",n.hasSpeech),l.zb(1),l.cc("ngIf",n.hasSpeech),l.zb(11),l.cc("ngIf",n.current&&n.teams))},directives:[c.y,c.wb,c.ub,c.i,i.t,c.r,c.L,c.M,c.E,c.K,c.S,c.h,c.mb,c.vb,c.a,o.j,o.m,c.T,c.W,c.Hb,c.z,c.hb,i.s,c.ib],styles:[""]}),e})()}];let j=(()=>{class e{}return e.\u0275mod=l.Ib({type:e}),e.\u0275inj=l.Hb({factory:function(n){return new(n||e)},imports:[[a.l.forChild(P)],a.l]}),e})(),B=(()=>{class e{}return e.\u0275mod=l.Ib({type:e}),e.\u0275inj=l.Hb({factory:function(n){return new(n||e)},imports:[[i.c,o.e,c.yb,j]]}),e})()}}]);