!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"7wo0":function(t,r,i){"use strict";i.r(r),i.d(r,"SettingsPageModule",(function(){return B}));var o=i("ofXK"),a=i("3Pt+"),c=i("TEn/"),s=i("tyNb"),u=i("mrSG"),b=i("gcOT"),l=i("NldC"),d=i("fXoL"),g=i("J+wX"),f=i("EPm9"),h=i("BTjV"),v=i("tRi0"),p=i("CuFv");function m(e,n){if(1&e&&(d.Nb(0,"ion-item"),d.Nb(1,"ion-label",12),d.kc(2),d.Mb(),d.Lb(3,"ion-progress-bar",13),d.Mb()),2&e){var t=d.Xb(2);d.zb(2),d.mc("",t.updateService.phase,":"),d.zb(1),d.bc("value",t.updateService.percentDone)}}function M(e,n){if(1&e){var t=d.Ob();d.Nb(0,"ion-item",14),d.Nb(1,"ion-label",5),d.kc(2,"You have an update ready."),d.Mb(),d.Nb(3,"ion-button",15),d.Ub("click",(function(){return d.dc(t),d.Xb(2).updateService.reload()})),d.kc(4,"Reload"),d.Mb(),d.Mb()}}function k(e,n){if(1&e){var t=d.Ob();d.Nb(0,"ion-toggle",10),d.Ub("ionChange",(function(){return d.dc(t),d.Xb(2).setBoolean("disableSleep")}))("ngModelChange",(function(e){return d.dc(t),d.Xb(2).current.disableSleep=e})),d.Mb()}if(2&e){var r=d.Xb(2);d.ac("ngModel",r.current.disableSleep)}}function N(e,n){if(1&e){var t=d.Ob();d.Nb(0,"span"),d.Nb(1,"ion-list-header",4),d.Nb(2,"h3"),d.kc(3,"Automatic Updates"),d.Mb(),d.Mb(),d.Nb(4,"ion-item"),d.Nb(5,"ion-label",5),d.kc(6,"Receive beta updates?"),d.Mb(),d.Nb(7,"ion-toggle",10),d.Ub("ionChange",(function(){return d.dc(t),d.Xb().setBeta()}))("ngModelChange",(function(e){return d.dc(t),d.Xb().betaEnabled=e})),d.Mb(),d.Mb(),d.jc(8,m,4,2,"ion-item",3),d.jc(9,M,5,0,"ion-item",11),d.Nb(10,"ion-list-header",4),d.Nb(11,"h3"),d.kc(12,"Disable Sleep"),d.Mb(),d.Mb(),d.Nb(13,"ion-item"),d.Nb(14,"ion-label",5),d.kc(15,"Disable sleep while games are active?"),d.Mb(),d.jc(16,k,1,1,"ion-toggle",6),d.Mb(),d.Mb()}if(2&e){var r=d.Xb();d.zb(7),d.ac("ngModel",r.betaEnabled),d.zb(1),d.ac("ngIf",r.updateService.updateAvailable&&!r.updateService.updateReady&&r.updateService.percentDone),d.zb(1),d.ac("ngIf",r.updateService.updateReady),d.zb(7),d.ac("ngIf",r.current)}}function w(e,n){if(1&e){var t=d.Ob();d.Nb(0,"ion-toggle",10),d.Ub("ionChange",(function(){return d.dc(t),d.Xb().setBoolean("reduceMotion")}))("ngModelChange",(function(e){return d.dc(t),d.Xb().current.reduceMotion=e})),d.Mb()}if(2&e){var r=d.Xb();d.ac("ngModel",r.current.reduceMotion)}}function C(e,n){if(1&e){var t=d.Ob();d.Nb(0,"ion-toggle",10),d.Ub("ionChange",(function(){return d.dc(t),d.Xb().setBoolean("darkMode")}))("ngModelChange",(function(e){return d.dc(t),d.Xb().current.darkMode=e})),d.Mb()}if(2&e){var r=d.Xb();d.ac("ngModel",r.current.darkMode)}}function y(e,n){if(1&e){var t=d.Ob();d.Nb(0,"ion-toggle",10),d.Ub("ionChange",(function(){return d.dc(t),d.Xb().setBoolean("audio")}))("ngModelChange",(function(e){return d.dc(t),d.Xb().current.audio=e})),d.Mb()}if(2&e){var r=d.Xb();d.ac("ngModel",r.current.audio)}}function x(e,n){if(1&e){var t=d.Ob();d.Nb(0,"ion-range",16),d.Ub("ionChange",(function(e){return d.dc(t),d.Xb().setVolume(e)}))("ngModelChange",(function(e){return d.dc(t),d.Xb().volume=e})),d.Mb()}if(2&e){var r=d.Xb();d.ac("ngModel",r.volume)}}function S(e,n){if(1&e&&(d.Nb(0,"ion-select-option",13),d.kc(1),d.Mb()),2&e){var t=n.$implicit;d.ac("value",t.id),d.zb(1),d.lc(t.fullName)}}function O(e,n){if(1&e){var t=d.Ob();d.Nb(0,"ion-select",17),d.Ub("ionChange",(function(e){return d.dc(t),d.Xb().setString("favoriteTeam",e)}))("ngModelChange",(function(e){return d.dc(t),d.Xb().current.favoriteTeam=e})),d.jc(1,S,2,2,"ion-select-option",18),d.Mb()}if(2&e){var r=d.Xb();d.ac("interfaceOptions",r.teamOptions)("ngModel",r.current.favoriteTeam),d.zb(1),d.ac("ngForOf",r.teams)("ngForTrackBy",r.id)}}var I,X,j,R=b.a.Device,T=[{path:"",component:(I=function(){function t(n,r,i,o,a,c){e(this,t),this.database=n,this.deploy=r,this.platform=i,this.settings=o,this.updateService=a,this.voiceService=c,this.betaEnabled=!1,this.devicePlatform="web",this.hasSpeech=!1,this.teamOptions={header:"Choose Your Team"},this.voiceOptions={header:"Choose a Voice"},this.id=l.a.trackById,this.hasSpeech=void 0!==window.speechSynthesis}var r,i,o;return r=t,(i=[{key:"ngOnInit",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.platform.ready();case 2:return console.debug("SettingsPage.ngOnInit()"),e.prev=3,e.next=6,R.getInfo();case 6:n=e.sent,this.devicePlatform=n.platform,console.debug("SettingsPage.ngOnInit(): platform="+this.devicePlatform),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("SettingsPage.ngOnInit(): failed to get device info:",e.t0);case 13:if("web"===this.devicePlatform){e.next=24;break}return e.prev=14,e.next=17,this.deploy.getConfiguration();case 17:t=e.sent,this.betaEnabled="beta"===t.channel.toLowerCase(),console.debug("SettingsPage.ngOnInit(): betaEnabled="+this.betaEnabled),e.next=24;break;case 21:e.prev=21,e.t1=e.catch(14),console.error("SettingsPage.ngOnInit(): failed to get deploy configuration:",e.t1);case 24:return e.next=26,this.database.teams();case 26:return this.teams=e.sent.sort((function(e,n){return e.fullName<n.fullName?-1:e.fullName>n.fullName?1:0})),e.next=29,this.settings.getAll();case 29:return this.current=e.sent,this.volume=Math.round(1e3*this.current.volume),this.voices=this.voiceService.voices(),e.next=34,this.voiceService.voice(this.current.voice);case 34:this.voice=e.sent,console.debug("SettingsPage.onInit(): current settings=",this.current);case 36:case"end":return e.stop()}}),e,this,[[3,10],[14,21]])})))}},{key:"isBeta",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.deploy.getConfiguration();case 2:return e.t0=e.sent.channel.toLowerCase(),e.abrupt("return","beta"===e.t0);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"setBeta",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.deploy.configure({channel:this.betaEnabled?"Beta":"Stable"});case 2:return e.next=4,this.isBeta();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"getTeamName",value:function(e){var n=this.teams.find((function(n){return n.id===e}));return n?n.fullName:""}},{key:"setBoolean",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.settings.setBoolean(e,this.current[e]);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"setString",value:function(e,n){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.debug("setString: key=",e),console.debug("setString: ev=",n),t.next=4,this.settings.setString(e,this.current[e]);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"setVolume",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.settings.setNumber("volume",e.detail.value/1e3);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"setVoice",value:function(e){var n,t;return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.voiceService.voice(null===(n=null==e?void 0:e.detail)||void 0===n?void 0:n.value);case 2:if(!r.sent){r.next=8;break}return r.next=5,this.settings.setVoice(e.detail.value);case 5:this.speak(),r.next=9;break;case 8:console.error("Unable to locate voice: "+(null===(t=null==e?void 0:e.detail)||void 0===t?void 0:t.value));case 9:case"end":return r.stop()}}),r,this)})))}},{key:"speak",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(null==e||e.preventDefault(),null==e||e.stopPropagation(),this.voiceService.say("The commissioner is doing a great job!",{force:!0})));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"setFavoriteTeam",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=this.teams.find((function(n){return n.id===e.value})),this.settings.setFavoriteTeam(null==t?void 0:t.id);case 2:case"end":return n.stop()}}),n,this)})))}}])&&n(r.prototype,i),o&&n(r,o),t}(),I.\u0275fac=function(e){return new(e||I)(d.Kb(g.a),d.Kb(f.a),d.Kb(c.Eb),d.Kb(h.a),d.Kb(v.a),d.Kb(p.a))},I.\u0275cmp=d.Eb({type:I,selectors:[["app-settings"]],decls:40,vars:7,consts:[[3,"translucent"],["color","primary"],["lines","none",1,"ion-text-wrap"],[4,"ngIf"],["lines","full"],[1,"ion-text-wrap"],["slot","end",3,"ngModel","ionChange","ngModelChange",4,"ngIf"],["min","0","max","1000","debounce","200","slot","end",3,"ngModel","ionChange","ngModelChange",4,"ngIf"],["id","bl-team-selector"],["class","ion-text-wrap","interface","action-sheet","okText","Choose","cancelText","Cancel",3,"interfaceOptions","ngModel","ionChange","ngModelChange",4,"ngIf"],["slot","end",3,"ngModel","ionChange","ngModelChange"],["color","danger",4,"ngIf"],["slot","start"],[3,"value"],["color","danger"],["slot","end","color","light",3,"click"],["min","0","max","1000","debounce","200","slot","end",3,"ngModel","ionChange","ngModelChange"],["interface","action-sheet","okText","Choose","cancelText","Cancel",1,"ion-text-wrap",3,"interfaceOptions","ngModel","ionChange","ngModelChange"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"]],template:function(e,n){1&e&&(d.Nb(0,"ion-header",0),d.Nb(1,"ion-toolbar",1),d.Nb(2,"ion-title"),d.kc(3,"Slettings"),d.Mb(),d.Mb(),d.Mb(),d.Nb(4,"ion-content"),d.Nb(5,"ion-list",2),d.jc(6,N,17,4,"span",3),d.Nb(7,"ion-list-header",4),d.Nb(8,"h3"),d.kc(9,"Interface"),d.Mb(),d.Mb(),d.Nb(10,"ion-item"),d.Nb(11,"ion-label",5),d.kc(12,"Reduce motion in effects?"),d.Mb(),d.jc(13,w,1,1,"ion-toggle",6),d.Mb(),d.Nb(14,"ion-item"),d.Nb(15,"ion-label",5),d.kc(16,"Always use dark mode?"),d.Mb(),d.jc(17,C,1,1,"ion-toggle",6),d.Mb(),d.Nb(18,"ion-list-header",4),d.Nb(19,"h3"),d.kc(20,"Audio"),d.Mb(),d.Mb(),d.Nb(21,"ion-item"),d.Nb(22,"ion-label",5),d.kc(23,"Enable Sound Effects?"),d.Mb(),d.jc(24,y,1,1,"ion-toggle",6),d.Mb(),d.Nb(25,"ion-item"),d.Nb(26,"ion-label",5),d.kc(27,"Volume:"),d.Mb(),d.jc(28,x,1,1,"ion-range",7),d.Mb(),d.Nb(29,"ion-list-header",4),d.Nb(30,"h3"),d.kc(31,"Teams"),d.Mb(),d.Mb(),d.Nb(32,"ion-item",8),d.Nb(33,"ion-label",5),d.Nb(34,"ion-label"),d.Nb(35,"h4"),d.kc(36,"Choose Your Team:"),d.Mb(),d.Mb(),d.Nb(37,"ion-note"),d.kc(38,"Your team is first in the live feed."),d.Mb(),d.Mb(),d.jc(39,O,2,4,"ion-select",9),d.Mb(),d.Mb(),d.Mb()),2&e&&(d.ac("translucent",!0),d.zb(6),d.ac("ngIf","web"!==n.devicePlatform),d.zb(7),d.ac("ngIf",n.current),d.zb(4),d.ac("ngIf",n.current),d.zb(7),d.ac("ngIf",n.current),d.zb(4),d.ac("ngIf",n.current),d.zb(11),d.ac("ngIf",n.current&&n.teams))},directives:[c.y,c.wb,c.ub,c.r,c.L,o.t,c.M,c.E,c.K,c.S,c.vb,c.a,a.j,a.m,c.T,c.h,c.W,c.Hb,c.hb,o.s,c.ib],styles:[""]}),I)}],P=((j=function n(){e(this,n)}).\u0275mod=d.Ib({type:j}),j.\u0275inj=d.Hb({factory:function(e){return new(e||j)},imports:[[s.l.forChild(T)],s.l]}),j),B=((X=function n(){e(this,n)}).\u0275mod=d.Ib({type:X}),X.\u0275inj=d.Hb({factory:function(e){return new(e||X)},imports:[[o.c,a.e,c.yb,P]]}),X)}}])}();