!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"7wo0":function(t,i,o){"use strict";o.r(i),o.d(i,"SettingsPageModule",(function(){return D}));var r=o("ofXK"),c=o("3Pt+"),a=o("TEn/"),s=o("tyNb"),u=o("mrSG"),b=o("gcOT"),l=o("NldC"),f=o("fXoL"),g=o("J+wX"),d=o("EPm9"),h=o("BTjV"),v=o("tRi0"),m=o("CuFv");function p(e,n){1&e&&(f.Nb(0,"ion-button"),f.Lb(1,"ion-spinner"),f.Mb())}function M(e,n){if(1&e){var t=f.Ob();f.Nb(0,"ion-toggle",12),f.Vb("ionChange",(function(){return f.fc(t),f.Zb(2).setBetaEnabled()}))("ngModelChange",(function(e){return f.fc(t),f.Zb(2).current.betaEnabled=e})),f.Mb()}if(2&e){var i=f.Zb(2);f.cc("ngModel",i.current.betaEnabled)}}function N(e,n){if(1&e&&(f.Nb(0,"ion-item"),f.Nb(1,"ion-label",13),f.mc(2),f.Mb(),f.Lb(3,"ion-progress-bar",14),f.Mb()),2&e){var t=f.Zb(2);f.zb(2),f.oc("",t.updateService.phase,":"),f.zb(1),f.dc("value",t.updateService.percentDone)}}function C(e,n){if(1&e){var t=f.Ob();f.Nb(0,"ion-item",15),f.Nb(1,"ion-label",6),f.mc(2,"A content update is available."),f.Mb(),f.Nb(3,"ion-button",16),f.Vb("click",(function(){return f.fc(t),f.Zb(2).updateService.reload()})),f.mc(4,"Apply"),f.Mb(),f.Mb()}}function k(e,n){if(1&e){var t=f.Ob();f.Nb(0,"ion-toggle",12),f.Vb("ionChange",(function(){return f.fc(t),f.Zb(2).setBoolean("disableSleep")}))("ngModelChange",(function(e){return f.fc(t),f.Zb(2).current.disableSleep=e})),f.Mb()}if(2&e){var i=f.Zb(2);f.cc("ngModel",i.current.disableSleep)}}function w(e,n){if(1&e&&(f.Nb(0,"span"),f.Nb(1,"ion-list-header",5),f.Nb(2,"h3"),f.mc(3,"Automatic Updates"),f.Mb(),f.Mb(),f.Nb(4,"ion-item"),f.Nb(5,"ion-label",6),f.mc(6,"Receive content updates early?"),f.Mb(),f.lc(7,M,1,1,"ion-toggle",7),f.Mb(),f.lc(8,N,4,2,"ion-item",3),f.lc(9,C,5,0,"ion-item",11),f.Nb(10,"ion-list-header",5),f.Nb(11,"h3"),f.mc(12,"Disable Sleep"),f.Mb(),f.Mb(),f.Nb(13,"ion-item"),f.Nb(14,"ion-label",6),f.mc(15,"Disable sleep while games are active?"),f.Mb(),f.lc(16,k,1,1,"ion-toggle",7),f.Mb(),f.Mb()),2&e){var t=f.Zb();f.zb(7),f.cc("ngIf",t.current),f.zb(1),f.cc("ngIf",t.updateService.updateAvailable&&!t.updateService.updateReady&&t.updateService.percentDone),f.zb(1),f.cc("ngIf",t.updateService.updateReady),f.zb(7),f.cc("ngIf",t.current)}}function x(e,n){if(1&e){var t=f.Ob();f.Nb(0,"ion-toggle",12),f.Vb("ionChange",(function(){return f.fc(t),f.Zb().setBoolean("reduceMotion")}))("ngModelChange",(function(e){return f.fc(t),f.Zb().current.reduceMotion=e})),f.Mb()}if(2&e){var i=f.Zb();f.cc("ngModel",i.current.reduceMotion)}}function O(e,n){if(1&e){var t=f.Ob();f.Nb(0,"ion-toggle",12),f.Vb("ionChange",(function(){f.fc(t);var e=f.Zb();return e.settings.setDarkMode(e.current.darkMode)}))("ngModelChange",(function(e){return f.fc(t),f.Zb().current.darkMode=e})),f.Mb()}if(2&e){var i=f.Zb();f.cc("ngModel",i.current.darkMode)}}function y(e,n){if(1&e){var t=f.Ob();f.Nb(0,"ion-toggle",12),f.Vb("ionChange",(function(){return f.fc(t),f.Zb().setBoolean("audio")}))("ngModelChange",(function(e){return f.fc(t),f.Zb().current.audio=e})),f.Mb()}if(2&e){var i=f.Zb();f.cc("ngModel",i.current.audio)}}function S(e,n){if(1&e){var t=f.Ob();f.Nb(0,"ion-range",17),f.Vb("ionChange",(function(e){return f.fc(t),f.Zb().setVolume(e)}))("ngModelChange",(function(e){return f.fc(t),f.Zb().volume=e})),f.Mb()}if(2&e){var i=f.Zb();f.cc("ngModel",i.volume)}}function I(e,n){if(1&e){var t=f.Ob();f.Nb(0,"ion-toggle",12),f.Vb("ionChange",(function(){return f.fc(t),f.Zb(2).setBoolean("speech")}))("ngModelChange",(function(e){return f.fc(t),f.Zb(2).current.speech=e})),f.Mb()}if(2&e){var i=f.Zb(2);f.cc("ngModel",i.current.speech)}}function Z(e,n){if(1&e&&(f.Nb(0,"ion-item"),f.Nb(1,"ion-label",6),f.mc(2,"Enable Speech?"),f.Mb(),f.lc(3,I,1,1,"ion-toggle",7),f.Mb()),2&e){var t=f.Zb();f.zb(3),f.cc("ngIf",t.current)}}function T(e,n){if(1&e&&(f.Nb(0,"ion-select-option",14),f.mc(1),f.Mb()),2&e){var t=n.$implicit;f.cc("value",t.voiceURI),f.zb(1),f.nc(t.name)}}function z(e,n){if(1&e){var t=f.Ob();f.Nb(0,"ion-select",20),f.Vb("ionChange",(function(e){return f.fc(t),f.Zb(2).setVoice(e)})),f.lc(1,T,2,2,"ion-select-option",21),f.Mb()}if(2&e){var i=f.Zb(2);f.cc("interfaceOptions",i.voiceOptions)("value",i.current.voice),f.zb(1),f.cc("ngForOf",i.voices)}}function R(e,n){if(1&e){var t=f.Ob();f.Nb(0,"ion-item"),f.Nb(1,"ion-icon",18),f.Vb("click",(function(e){return f.fc(t),f.Zb().speak(e)})),f.Mb(),f.Nb(2,"ion-label",6),f.mc(3,"Voice:"),f.Mb(),f.lc(4,z,2,3,"ion-select",19),f.Mb()}if(2&e){var i=f.Zb();f.zb(4),f.cc("ngIf",i.current&&i.voice)}}function V(e,n){if(1&e&&(f.Nb(0,"ion-select-option",14),f.mc(1),f.Mb()),2&e){var t=n.$implicit;f.cc("value",t.id),f.zb(1),f.nc(t.fullName)}}function E(e,n){if(1&e){var t=f.Ob();f.Nb(0,"ion-select",22),f.Vb("ionChange",(function(e){return f.fc(t),f.Zb().setString("favoriteTeam",e)}))("ngModelChange",(function(e){return f.fc(t),f.Zb().current.favoriteTeam=e})),f.lc(1,V,2,2,"ion-select-option",23),f.Mb()}if(2&e){var i=f.Zb();f.cc("interfaceOptions",i.teamOptions)("ngModel",i.current.favoriteTeam),f.zb(1),f.cc("ngForOf",i.teams)("ngForTrackBy",i.id)}}var P,j,B,F=b.a.Device,K=[{path:"",component:(P=function(){function t(n,i,o,r,c,a){e(this,t),this.database=n,this.deploy=i,this.platform=o,this.settings=r,this.updateService=c,this.voiceService=a,this.loading=!0,this.betaEnabled=!1,this.devicePlatform="web",this.hasSpeech=!1,this.teamOptions={header:"Choose Your Team"},this.voiceOptions={header:"Choose a Voice"},this.id=l.a.trackById,this.hasSpeech=void 0!==window.speechSynthesis}var i,o,r;return i=t,(o=[{key:"ngOnInit",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.platform.ready();case 2:return console.debug("SettingsPage.ngOnInit()"),e.prev=3,e.next=6,F.getInfo();case 6:n=e.sent,this.devicePlatform=n.platform,console.debug("SettingsPage.ngOnInit(): platform="+this.devicePlatform),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("SettingsPage.ngOnInit(): failed to get device info:",e.t0);case 13:if("web"===this.devicePlatform){e.next=24;break}return e.prev=14,e.next=17,this.deploy.getConfiguration();case 17:t=e.sent,this.betaEnabled="beta"===t.channel.toLowerCase(),console.debug("SettingsPage.ngOnInit(): betaEnabled="+this.betaEnabled),e.next=24;break;case 21:e.prev=21,e.t1=e.catch(14),console.error("SettingsPage.ngOnInit(): failed to get deploy configuration:",e.t1);case 24:return e.next=26,this.settings.getAll();case 26:return this.current=e.sent,this.volume=Math.round(1e3*this.current.volume),e.next=30,this.database.teams();case 30:return this.teams=e.sent.sort((function(e,n){return e.fullName<n.fullName?-1:e.fullName>n.fullName?1:0})),this.voices=this.voiceService.voices(),e.next=34,this.voiceService.voice(this.current.voice);case 34:this.voice=e.sent,this.loading=!1,console.debug("SettingsPage.onInit(): current settings=",this.current);case 37:case"end":return e.stop()}}),e,this,[[3,10],[14,21]])})))}},{key:"setBetaEnabled",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.settings.setBetaEnabled(this.current.betaEnabled);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))}},{key:"getTeamName",value:function(e){var n=this.teams.find((function(n){return n.id===e}));return n?n.fullName:""}},{key:"setBoolean",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.settings.setBoolean(e,this.current[e]);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"setString",value:function(e,n){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.debug("setString: key=",e),console.debug("setString: ev=",n),t.next=4,this.settings.setString(e,this.current[e]);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"setVolume",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.settings.setNumber("volume",e.detail.value/1e3);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"setVoice",value:function(e){var n,t;return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.voiceService.voice(null===(n=null==e?void 0:e.detail)||void 0===n?void 0:n.value);case 2:if(!i.sent){i.next=8;break}return i.next=5,this.settings.setVoice(e.detail.value);case 5:this.speak(),i.next=9;break;case 8:console.error("Unable to locate voice: "+(null===(t=null==e?void 0:e.detail)||void 0===t?void 0:t.value));case 9:case"end":return i.stop()}}),i,this)})))}},{key:"speak",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(null==e||e.preventDefault(),null==e||e.stopPropagation(),this.voiceService.say("The commissioner is doing a great job!",{force:!0})));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"setFavoriteTeam",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=this.teams.find((function(n){return n.id===e.value})),this.settings.setFavoriteTeam(null==t?void 0:t.id);case 2:case"end":return n.stop()}}),n,this)})))}}])&&n(i.prototype,o),r&&n(i,r),t}(),P.\u0275fac=function(e){return new(e||P)(f.Kb(g.a),f.Kb(d.a),f.Kb(a.Eb),f.Kb(h.a),f.Kb(v.a),f.Kb(m.a))},P.\u0275cmp=f.Eb({type:P,selectors:[["app-settings"]],decls:44,vars:10,consts:[[3,"translucent"],["color","primary"],["slot","secondary"],[4,"ngIf"],["lines","none",1,"ion-text-wrap"],["lines","full"],[1,"ion-text-wrap"],["slot","end",3,"ngModel","ionChange","ngModelChange",4,"ngIf"],["min","0","max","1000","debounce","200","slot","end",3,"ngModel","ionChange","ngModelChange",4,"ngIf"],["id","bl-team-selector"],["class","ion-text-wrap","interface","action-sheet","okText","Choose","cancelText","Cancel",3,"interfaceOptions","ngModel","ionChange","ngModelChange",4,"ngIf"],["color","danger",4,"ngIf"],["slot","end",3,"ngModel","ionChange","ngModelChange"],["slot","start"],[3,"value"],["color","danger"],["slot","end","color","light",3,"click"],["min","0","max","1000","debounce","200","slot","end",3,"ngModel","ionChange","ngModelChange"],["name","volume-high-outline","slot","start",1,"ion-no-margin",2,"margin-right","0.5em",3,"click"],["class","ion-text-wrap","interface","action-sheet","okText","Choose","cancelText","Cancel",3,"interfaceOptions","value","ionChange",4,"ngIf"],["interface","action-sheet","okText","Choose","cancelText","Cancel",1,"ion-text-wrap",3,"interfaceOptions","value","ionChange"],[3,"value",4,"ngFor","ngForOf"],["interface","action-sheet","okText","Choose","cancelText","Cancel",1,"ion-text-wrap",3,"interfaceOptions","ngModel","ionChange","ngModelChange"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"]],template:function(e,n){1&e&&(f.Nb(0,"ion-header",0),f.Nb(1,"ion-toolbar",1),f.Nb(2,"ion-title"),f.mc(3,"Slettings"),f.Mb(),f.Nb(4,"ion-buttons",2),f.lc(5,p,2,0,"ion-button",3),f.Mb(),f.Mb(),f.Mb(),f.Nb(6,"ion-content"),f.Nb(7,"ion-list",4),f.lc(8,w,17,4,"span",3),f.Nb(9,"ion-list-header",5),f.Nb(10,"h3"),f.mc(11,"Interface"),f.Mb(),f.Mb(),f.Nb(12,"ion-item"),f.Nb(13,"ion-label",6),f.mc(14,"Reduce motion in effects?"),f.Mb(),f.lc(15,x,1,1,"ion-toggle",7),f.Mb(),f.Nb(16,"ion-item"),f.Nb(17,"ion-label",6),f.mc(18,"Always use dark mode?"),f.Mb(),f.lc(19,O,1,1,"ion-toggle",7),f.Mb(),f.Nb(20,"ion-list-header",5),f.Nb(21,"h3"),f.mc(22,"Audio"),f.Mb(),f.Mb(),f.Nb(23,"ion-item"),f.Nb(24,"ion-label",6),f.mc(25,"Enable Sound Effects?"),f.Mb(),f.lc(26,y,1,1,"ion-toggle",7),f.Mb(),f.Nb(27,"ion-item"),f.Nb(28,"ion-label",6),f.mc(29,"Volume:"),f.Mb(),f.lc(30,S,1,1,"ion-range",8),f.Mb(),f.lc(31,Z,4,1,"ion-item",3),f.lc(32,R,5,1,"ion-item",3),f.Nb(33,"ion-list-header",5),f.Nb(34,"h3"),f.mc(35,"Teams"),f.Mb(),f.Mb(),f.Nb(36,"ion-item",9),f.Nb(37,"ion-label",6),f.Nb(38,"ion-label"),f.Nb(39,"h4"),f.mc(40,"Choose Your Team:"),f.Mb(),f.Mb(),f.Nb(41,"ion-note"),f.mc(42,"Your team is first in the live feed."),f.Mb(),f.Mb(),f.lc(43,E,2,4,"ion-select",10),f.Mb(),f.Mb(),f.Mb()),2&e&&(f.cc("translucent",!0),f.zb(5),f.cc("ngIf",n.loading),f.zb(3),f.cc("ngIf","web"!==n.devicePlatform),f.zb(7),f.cc("ngIf",n.current),f.zb(4),f.cc("ngIf",n.current),f.zb(7),f.cc("ngIf",n.current),f.zb(4),f.cc("ngIf",n.current),f.zb(1),f.cc("ngIf",n.hasSpeech),f.zb(1),f.cc("ngIf",n.hasSpeech),f.zb(11),f.cc("ngIf",n.current&&n.teams))},directives:[a.y,a.wb,a.ub,a.i,r.t,a.r,a.L,a.M,a.E,a.K,a.S,a.h,a.mb,a.vb,a.a,c.j,c.m,a.T,a.W,a.Hb,a.z,a.hb,r.s,a.ib],styles:[""]}),P)}],A=((B=function n(){e(this,n)}).\u0275mod=f.Ib({type:B}),B.\u0275inj=f.Hb({factory:function(e){return new(e||B)},imports:[[s.l.forChild(K)],s.l]}),B),D=((j=function n(){e(this,n)}).\u0275mod=f.Ib({type:j}),j.\u0275inj=f.Hb({factory:function(e){return new(e||j)},imports:[[r.c,c.e,a.yb,A]]}),j)}}])}();