!function(){function e(e,n){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){i&&(e=i);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==i.return||i.return()}finally{if(c)throw a}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var r=c(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{v2dp:function(t,n,o){"use strict";o.r(n),o.d(n,"LiveFeedPageModule",(function(){return ye}));var s,c,l=o("TEn/"),d=o("ofXK"),h=o("3Pt+"),f=o("fXoL"),m=((s=function e(){u(this,e)}).\u0275mod=f.Hb({type:s}),s.\u0275inj=f.Gb({factory:function(e){return new(e||s)},imports:[[d.b,l.G]]}),s),g=o("tyNb"),b=o("mrSG"),v=o("HDdC"),p=o("gcOT");!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSED=2]="CLOSED"}(c||(c={}));var y=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(t){o(t)}}function s(e){try{c(i.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))},k=new(function(e){r(n,e);var t=a(n);function n(){return u(this,n),t.call(this,{name:"EventSource",platforms:["web"]})}return i(n,[{key:"configure",value:function(e){return y(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.debug("EventSourceWeb.configure(".concat(e.url,")")),e.url){t.next=2;break}throw new Error("url is required");case 2:this.url=e.url;case 3:case"end":return t.stop()}}),t,this)})))}},{key:"open",value:function(){return y(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.debug("EventSourceWeb.open()"),this.url){e.next=2;break}throw new Error("call configure first");case 2:this.eventSource=new window.EventSource(this.url),this.notifyListeners("readyStateChanged",{state:c.CONNECTING}),this.eventSource.addEventListener("error",(function(e){t.notifyListeners("error",{error:null==e?void 0:e.message})})),this.eventSource.addEventListener("message",(function(e){t.notifyListeners("message",{message:null==e?void 0:e.data})})),this.eventSource.addEventListener("open",(function(e){t.notifyListeners("open",{message:null==e?void 0:e.message}),t.notifyListeners("readyStateChanged",{state:c.OPEN})}));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"close",value:function(){return y(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.debug("EventSourceWeb.close()"),this.eventSource&&(this.eventSource.close(),this.notifyListeners("readyStateChanged",{state:c.CLOSED}));case 1:case"end":return e.stop()}}),e,this)})))}}]),n}(p.b));Object(p.c)(k);var w,S=p.a,M=S.App,x=S.Device,L=S.EventSource,C=S.Network,I=function(){function e(){var t=this;u(this,e),this.isConnected=!0,this.lastUpdated=0,this.lastRetry=0,this.maxRetryMillis=6e5,this.handles={},this.defaultRetryMillis=1e4,this.defaultCheckIntervalMillis=5e3,this.defaultRetryFallback=1.2,this.retryMillis=this.defaultRetryMillis,console.debug("APIStream(): default retry:          ".concat(this.defaultRetryMillis,"ms")),console.debug("APIStream(): default check interval: ".concat(this.defaultCheckIntervalMillis,"ms")),console.debug("APIStream(): default retry fallback: ".concat(this.defaultRetryFallback,"x")),x.getInfo().then((function(e){t.deviceInfo=e,"web"!==t.deviceInfo.platform?t.init("https://www.blaseball.com/events/streamData"):t.init()})).catch((function(e){console.error("APIStream(): failed to get device info, assuming web",e),t.deviceInfo={platform:"web"},t.init()}))}return i(e,[{key:"init",value:function(e){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.debug("APIStream.init(): initializing."),this.isStarted=!1,this.observable=v.a.create((function(e){n.observer=e})),e?(console.debug("APIStream.init(): pre-configured URL: "+e),this.url=e):this.url="https://cors-proxy.blaseball-reference.com/events/streamData",t.prev=1,t.next=4,M.getState();case 4:this.isActive=t.sent.isActive,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.error("APIStream.init(): failed to get app state, assuming active.",t.t0),this.isActive=!0;case 10:return t.prev=10,t.next=13,C.getStatus();case 13:this.isConnected=t.sent.connected,t.next=19;break;case 16:t.prev=16,t.t1=t.catch(10),console.error("APIStream.init(): failed to get connection state, assuming connected.",t.t1),this.isConnected=!0;case 19:M.addListener("appStateChange",(function(e){return Object(b.a)(n,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.isActive,console.debug("APIStream.init() isActive: ".concat(n," -> ").concat(e.isActive)),n||!e.isActive){t.next=7;break}return t.next=5,this.handleSystemChange(!0);case 5:t.next=11;break;case 7:if(t.t0=e.isActive,!t.t0){t.next=11;break}return t.next=11,this.handleSystemChange();case 11:case"end":return t.stop()}}),t,this)})))})),C.addListener("networkStatusChange",(function(e){return Object(b.a)(n,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.debug("APIStream.init() isConnected: ".concat(this.isConnected," -> ").concat(e.connected)),t.t0=e.connected,!t.t0){t.next=5;break}return t.next=5,this.handleSystemChange(!0);case 5:case"end":return t.stop()}}),t,this)})))}));case 20:case"end":return t.stop()}}),t,this,[[1,7],[10,16]])})))}},{key:"handleSystemChange",value:function(e){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.debug("APIStream.handleSystemChange(): retrigger="+e),!this.isStarted){t.next=10;break}if(t.t0=!e&&this.source,t.t0){t.next=8;break}return console.debug("APIStream.handleSystemChange(): (re)creating connection"),t.next=7,this.createSource();case 7:this.startCheckingLastUpdated();case 8:t.next=15;break;case 10:return console.debug("APIStream.handleSystemChange(): shutting down"),this.retryChecker&&(clearInterval(this.retryChecker),this.retryChecker=null),t.next=14,this.closeSource();case 14:this.source=null;case 15:case"end":return t.stop()}}),t,this)})))}},{key:"start",value:function(){return console.info("APIStream.start()"),this.isStarted=!0,this.handleSystemChange(),this.observable}},{key:"stop",value:function(){console.info("APIStream.stop()"),this.isStarted=!1,this.handleSystemChange(),this.observer.complete(),this.observer=null,this.observable=null,this.retryMillis=this.defaultRetryMillis,this.lastUpdated=0}},{key:"retry",value:function(){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(console.debug("APIStream.retry()"),new Promise((function(e,n){try{t.lastRetry=Date.now(),t.closeSource();var i=Math.floor(Math.min(t.maxRetryMillis,t.retryMillis*t.defaultRetryFallback));console.debug("APIStream.retry(): ".concat(t.retryMillis," -> ").concat(i)),t.retryMillis=i,e(t.createSource())}catch(r){n(r)}}))));case 1:case"end":return e.stop()}}),e)})))}},{key:"onMessage",value:function(e){console.debug("APIStream.onMessage()");var t=new MessageEvent("message",{data:e});this.lastUpdate!==t.data&&(this.retryMillis!==this.defaultRetryMillis&&(console.debug("APIStream.onMessage(): ".concat(this.retryMillis," -> ").concat(this.defaultRetryMillis)),this.retryMillis=this.defaultRetryMillis),this.lastUpdated=Date.now(),this.lastUpdate=t.data,this.observer&&this.observer.next(t))}},{key:"createSource",value:function(){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(console.debug("APIStream.createSource()"),new Promise((function(e,n){return Object(b.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){var i,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.closeSource();case 2:return i=L,this.source=i,t.next=6,i.configure({url:this.url});case 6:return this.handles.message=i.addListener("message",(function(t){r.onMessage(t.message),e(!0)})),this.handles.error=i.addListener("error",(function(e){if(console.error("APIStream.createSource(): An error occurred reading from the event source.  Resetting.",e.error),n(!0),r.observer){var t=new ErrorEvent("error",{message:e.error});r.observer.next(t)}else console.debug("APIStream.createSource(): No observer?");r.checkLastUpdated()})),t.next=10,i.open();case 10:case"end":return t.stop()}}),t,this)})))}))));case 1:case"end":return e.stop()}}),e)})))}},{key:"closeSource",value:function(){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.source){e.next=7;break}for(t=0,n=Object.keys(this.handles);t<n.length;t++)i=n[t],this.handles[i].remove();return this.handles={},e.next=6,this.source.close();case 6:this.source=null;case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.warn("APIStream.closeSource(): failed to close event source:",e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})))}},{key:"startCheckingLastUpdated",value:function(){var e=this;console.debug("APIStream.startCheckingLastUpdated()"),this.retryChecker&&clearInterval(this.retryChecker),setTimeout((function(){e.retryChecker=setInterval((function(){e.checkLastUpdated()}),e.defaultCheckIntervalMillis)}),this.defaultCheckIntervalMillis)}},{key:"checkLastUpdated",value:function(){var e=this,t=Math.max(this.lastUpdated,this.lastRetry),n=Date.now();this.hourChecker||(this.hourChecker=setTimeout((function(){console.debug("APIStream.checkLastUpdate(): new hour, force a check."),e.checkLastUpdated()}),n-n%36e5+36e5));var i=Math.round(this.lastRetry%36e5/36e5*100),r=Math.round(n%36e5/36e5*100);r<i&&(console.debug("APIStream.checkLastUpdated(): hour reset (".concat(r," < ").concat(i,")")),this.retryMillis=this.defaultRetryMillis,clearTimeout(this.hourChecker),this.hourChecker=null);var o=t+this.retryMillis;console.debug("APIStream.checkLastUpdated(): now=".concat(this.formatDate(n),", lastUpdated=").concat(this.formatDate(this.lastUpdated),", lastRetry=").concat(this.formatDate(this.lastRetry),", threshold=").concat(this.formatDate(o),", retryMillis=").concat((this.retryMillis/1e3/1).toPrecision(2),"s")),n>o?this.retry():console.debug("APIStream.checkLastUpdated(): ".concat(this.formatDate(n)," < ").concat(this.formatDate(o)))}},{key:"formatDate",value:function(e){return("number"==typeof e?new Date(e):e).toISOString()}}]),e}(),P=function(){function t(e){u(this,t),this.data=e,void 0===this.data&&(this.data={})}return i(t,[{key:"incremented",value:function(e){var t=this.data&&this.data[e];return void 0===t&&(t=-1),t+1}},{key:"defineStrings",value:function(t){var n,i=this,r=e(t);try{var o=function(){var e=n.value;Object.defineProperty(i,e,{get:function(){return i.data[e]}})};for(r.s();!(n=r.n()).done;)o()}catch(a){r.e(a)}finally{r.f()}}},{key:"defineNumbers",value:function(t){var n,i=this,r=e(t);try{var o=function(){var e=n.value;Object.defineProperty(i,e,{get:function(){return i.data[e]}})};for(r.s();!(n=r.n()).done;)o()}catch(a){r.e(a)}finally{r.f()}}},{key:"defineIncrementedNumbers",value:function(t){var n,i=this,r=e(t);try{var o=function(){var e=n.value;Object.defineProperty(i,e,{get:function(){return i.incremented(e)}})};for(r.s();!(n=r.n()).done;)o()}catch(a){r.e(a)}finally{r.f()}}},{key:"defineBooleans",value:function(t){var n,i=this,r=e(t);try{var o=function(){var e=n.value;Object.defineProperty(i,e,{get:function(){return Boolean(i.data[e])}})};for(r.s();!(n=r.n()).done;)o()}catch(a){r.e(a)}finally{r.f()}}}]),t}(),j=function(e){r(n,e);var t=a(n);function n(e){var i;return u(this,n),(i=t.call(this,e)).defineStrings(["eraColor","eraTitle","id","league","playoffs","rules","seasonId","subEraColor","subEraTitle","terminology"]),i.defineIncrementedNumbers(["day","playoffRound","season"]),i.defineNumbers(["phase"]),i}return i(n,[{key:"isPreseason",value:function(){var e=new Date(this.data.nextSeasonStart).getTime();if(0===this.data.day&&e>Date.now())return!0}},{key:"isRegularSeason",value:function(){var e;return!this.isPreseason()&&void 0!==(null===(e=this.data)||void 0===e?void 0:e.day)&&this.data.day<99}},{key:"isPostseason",value:function(){var e;return!this.isPreseason()&&void 0!==(null===(e=this.data)||void 0===e?void 0:e.day)&&this.data.day>=99}},{key:"isPostseasonComplete",value:function(){return!(!this.data.nextElectionEnd||!this.data.nextPhaseTime||this.data.nextElectionEnd!==this.data.nextPhaseTime)||0===this.phase||this.isPreseason()}},{key:"countdownToNextPhase",value:function(e){var t=e||Date.now(),n=new Date(this.data.nextPhaseTime).getTime(),i=Math.floor((n-t)/1e3),r={hours:Math.floor(i/60/60)},o=i-60*r.hours*60;return r.minutes=Math.floor(o/60),r.seconds=o-60*r.minutes,r}},{key:"countdownToNextSeason",value:function(e){var t=e||Date.now(),n=new Date(this.data.nextSeasonStart).getTime(),i=Math.floor((n-t)/1e3),r={hours:Math.floor(i/60/60)},o=i-60*r.hours*60;return r.minutes=Math.floor(o/60),r.seconds=o-60*r.minutes,r}},{key:"nextSeasonStart",get:function(){return this.data.nextSeasonStart?new Date(this.data.nextSeasonStart):void 0}},{key:"nextPhaseTime",get:function(){return this.data.nextPhaseTime?new Date(this.data.nextPhaseTime):void 0}},{key:"nextElectionEnd",get:function(){return this.data.nextElectionEnd?new Date(this.data.nextElectionEnd):void 0}}]),n}(P),O=function(e){r(n,e);var t=a(n);function n(e){var i;return u(this,n),(i=t.call(this,e)).defineStrings(["id","league","rules","schedule","standings","stats","terminology"]),i.defineIncrementedNumbers(["seasonNumber"]),i}return n}(P),R=function(e){r(n,e);var t=a(n);function n(e){var i;return u(this,n),(i=t.call(this,e)).defineStrings(["id"]),i}return i(n,[{key:"records",get:function(){for(var e=[],t=0,n=Object.keys(this.data.losses||{});t<n.length;t++){var i=n[t];e.push({id:i,wins:this.data.wins[i],losses:this.data.losses[i]})}return e}}]),n}(P),z=function(e){r(n,e);var t=a(n);function n(){return u(this,n),t.apply(this,arguments)}return i(n,[{key:"id",get:function(){var e;return null===(e=this.data)||void 0===e?void 0:e.id}},{key:"name",get:function(){var e;return null===(e=this.data)||void 0===e?void 0:e.name}},{key:"numberOfRounds",get:function(){return this.incremented("numberOfRounds")}},{key:"playoffDay",get:function(){return this.incremented("playoffDay")}},{key:"rounds",get:function(){var e;return(null===(e=this.data)||void 0===e?void 0:e.rounds)||[]}},{key:"season",get:function(){return this.incremented("season")}},{key:"tomorrowRound",get:function(){return this.incremented("tomorrowRound")}},{key:"winner",get:function(){var e;return null===(e=this.data)||void 0===e?void 0:e.winner}}]),n}(P),T=function(e){r(n,e);var t=a(n);function n(e){var i;return u(this,n),(i=t.call(this,e)).defineStrings(["id","name"]),i.defineBooleans(["special"]),i.defineNumbers(["gameIndex"]),i.defineIncrementedNumbers(["roundNumber"]),i}return n}(P),N=function(e){r(n,e);var t=a(n);function n(){return u(this,n),t.apply(this,arguments)}return i(n,[{key:"playoffs",get:function(){var e;return new z(null===(e=this.data)||void 0===e?void 0:e.playoffs)}},{key:"round",get:function(){var e;return new T(null===(e=this.data)||void 0===e?void 0:e.round)}}]),n}(P),A=function(e){r(n,e);var t=a(n);function n(e){var i;return u(this,n),(i=t.call(this,e)).defineStrings(["id","awayBatter","awayBatterName","awayPitcher","awayPitcherName","awayTeam","awayTeamColor","awayTeamEmoji","awayTeamName","awayTeamNickname","homeBatter","homeBatterName","homePitcher","homePitcherName","homeTeam","homeTeamColor","homeTeamEmoji","homeTeamName","homeTeamNickname","lastUpdate","rules","statsheet","terminology"]),i.defineNumbers(["atBatBalls","atBatStrikes","awayOdds","awayScore","awayTeamBatterCount","baseRunnerCount","halfInningOuts","halfInningScore","homeScore","homeTeamBatterCount","phase","seriesIndex","seriesLength","weather"]),i.defineIncrementedNumbers(["day","inning","season"]),i.defineBooleans(["finalized","gameComplete","gameStart","isPostseason","topOfInning"]),i}return i(n,[{key:"baseRunnerNames",get:function(){var e;return(null===(e=this.data)||void 0===e?void 0:e.baseRunnerNames)||[]}},{key:"baseRunners",get:function(){var e;return(null===(e=this.data)||void 0===e?void 0:e.baseRunners)||[]}},{key:"basesOccupied",get:function(){var e;return(null===(e=this.data)||void 0===e?void 0:e.basesOccupied)||[]}},{key:"outcomes",get:function(){var e;return(null===(e=this.data)||void 0===e?void 0:e.outcomes)||[]}}]),n}(P),E=function(e){r(n,e);var t=a(n);function n(){return u(this,n),t.apply(this,arguments)}return i(n,[{key:"sim",get:function(){var e;return new j(null===(e=this.data)||void 0===e?void 0:e.sim)}},{key:"season",get:function(){var e;return new O(null===(e=this.data)||void 0===e?void 0:e.season)}},{key:"standings",get:function(){var e;return new R(null===(e=this.data)||void 0===e?void 0:e.standings)}},{key:"schedule",get:function(){var e,t;return(null===(t=null===(e=this.data)||void 0===e?void 0:e.schedule)||void 0===t?void 0:t.map((function(e){return new A(e)})))||[]}},{key:"tomorrowSchedule",get:function(){var e,t;return(null===(t=null===(e=this.data)||void 0===e?void 0:e.tomorrowSchedule)||void 0===t?void 0:t.map((function(e){return new A(e)})))||[]}},{key:"postseason",get:function(){var e;return new N(null===(e=this.data)||void 0===e?void 0:e.postseason)}}]),n}(P),D=function(e){r(n,e);var t=a(n);function n(){return u(this,n),t.apply(this,arguments)}return i(n,[{key:"id",get:function(){return this.data.id}},{key:"name",get:function(){return this.data.name}},{key:"teams",get:function(){return this.data.teams||[]}}]),n}(P),U=function(e){r(n,e);var t=a(n);function n(e){var i;return u(this,n),(i=t.call(this,e)).defineStrings(["id","emoji","fullName","location","mainColor","nickname","secondaryColor","shorthand","slogan"]),i.defineNumbers(["championships","seasonShames","seasonShamings","shameRuns","totalShames","totalShamings"]),i}return i(n,[{key:"bench",get:function(){return this.data.bench||[]}},{key:"bullpen",get:function(){return this.data.bullpen||[]}},{key:"lineup",get:function(){return this.data.lineup||[]}},{key:"rotation",get:function(){return this.data.rotation||[]}}]),n}(P),F=function(e){r(n,e);var t=a(n);function n(){return u(this,n),t.apply(this,arguments)}return i(n,[{key:"id",get:function(){var e;return null===(e=this.data)||void 0===e?void 0:e.id}},{key:"name",get:function(){var e;return null===(e=this.data)||void 0===e?void 0:e.name}},{key:"subleagues",get:function(){var e;return(null===(e=this.data)||void 0===e?void 0:e.subleagues)||[]}},{key:"tiebreakers",get:function(){var e;return null===(e=this.data)||void 0===e?void 0:e.tiebreakers}}]),n}(P),B=function(e){r(n,e);var t=a(n);function n(){return u(this,n),t.apply(this,arguments)}return i(n,[{key:"id",get:function(){return this.data.id}},{key:"name",get:function(){return this.data.name}},{key:"divisions",get:function(){return this.data.divisions||[]}}]),n}(P),_=function(e){r(n,e);var t=a(n);function n(){return u(this,n),t.apply(this,arguments)}return i(n,[{key:"divisions",get:function(){var e;return(null===(e=this.data.divisions)||void 0===e?void 0:e.map((function(e){return new D(e)})))||[]}},{key:"teams",get:function(){var e;return(null===(e=this.data.teams)||void 0===e?void 0:e.map((function(e){return new U(e)})))||[]}},{key:"leagues",get:function(){var e;return(null===(e=this.data.leagues)||void 0===e?void 0:e.map((function(e){return new F(e)})))||[]}},{key:"subleagues",get:function(){var e;return(null===(e=this.data.leagues)||void 0===e?void 0:e.map((function(e){return new B(e)})))||[]}}]),n}(P),K=function(e){r(n,e);var t=a(n);function n(){return u(this,n),t.apply(this,arguments)}return i(n,[{key:"games",get:function(){var e;return new E(null===(e=this.data)||void 0===e?void 0:e.games)}},{key:"leagues",get:function(){var e;return new _(null===(e=this.data)||void 0===e?void 0:e.leagues)}},{key:"season",get:function(){var e,t;if(null===(t=null===(e=this.data)||void 0===e?void 0:e.games)||void 0===t?void 0:t.season)return new O(this.data.games.season)}},{key:"sim",get:function(){var e,t;if(null===(t=null===(e=this.data)||void 0===e?void 0:e.games)||void 0===t?void 0:t.sim)return new j(this.data.games.sim)}},{key:"postseason",get:function(){var e,t;if(null===(t=null===(e=this.data)||void 0===e?void 0:e.games)||void 0===t?void 0:t.postseason)return new N(this.data.games.postseason)}},{key:"round",get:function(){var e,t,n;if(null===(n=null===(t=null===(e=this.data)||void 0===e?void 0:e.games)||void 0===t?void 0:t.postseason)||void 0===n?void 0:n.round)return new T(this.data.games.postseason.round)}},{key:"playoffs",get:function(){var e,t,n;if(null===(n=null===(t=null===(e=this.data)||void 0===e?void 0:e.games)||void 0===t?void 0:t.postseason)||void 0===n?void 0:n.playoffs)return new z(this.data.games.postseason.playoffs)}}]),n}(P),X=p.a.Storage,G=((w=function(){function e(){u(this,e),this.settings={segment:"all",favorites:{}},console.debug("SettingsService instantiated."),this.ready=this.init()}return i(e,[{key:"init",value:function(){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.debug("SettingsService initializing."),this.assertSettings(),e.prev=1,e.next=4,X.get({key:"favorites"});case 4:return(t=e.sent)&&void 0!==t.value&&(this.settings.favorites=JSON.parse(t.value)),e.next=8,X.get({key:"segment"});case 8:n=e.sent,this.settings.segment=(null==n?void 0:n.value)||"all",e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error("SettingsService.init(): failed to initialize settings.",e.t0),this.settings={segment:"all",favorites:{}};case 15:return e.abrupt("return",(console.debug("SettingsService.init(): settings=",this.settings),!0));case 16:case"end":return e.stop()}}),e,this,[[1,12]])})))}},{key:"assertSettings",value:function(){this.settings||(this.settings={}),this.settings.favorites||(this.settings.favorites={}),this.settings.segment||(this.settings.segment="all")}},{key:"isFavorite",value:function(e){return this.assertSettings(),Boolean(this.settings.favorites[e])}},{key:"setFavorite",value:function(e,t){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(this.assertSettings(),this.settings.favorites[e]=t,X.set({key:"favorites",value:JSON.stringify(this.settings.favorites)}).then((function(){return console.debug("set favorite: ".concat(e," = ").concat(t)),t}))));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"toggleFavorite",value:function(e){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(this.assertSettings(),this.setFavorite(e,!this.isFavorite(e))));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"getSegment",value:function(){return this.assertSettings(),this.settings.segment}},{key:"setSegment",value:function(e){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(this.assertSettings(),this.settings.segment=e,X.set({key:"segment",value:e}).then((function(){return console.debug("set segment: "+e),e}))));case 1:case"end":return t.stop()}}),t,this)})))}}]),e}()).\u0275fac=function(e){return new(e||w)},w.\u0275prov=f.Fb({token:w,factory:w.\u0275fac,providedIn:"root"}),w);function H(e,t){1&e&&f.Kb(0,"ion-icon",20)}function W(e,t){1&e&&f.Kb(0,"ion-icon",21)}function J(e,t){1&e&&f.Kb(0,"ion-icon",20)}function V(e,t){1&e&&f.Kb(0,"ion-icon",21)}function Y(e,t){if(1&e&&(f.Wb(),f.Mb(0,"svg",22),f.Mb(1,"g",23),f.Kb(2,"path",24),f.Kb(3,"path",25),f.Kb(4,"path",26),f.Kb(5,"path",27),f.Kb(6,"rect",28),f.Kb(7,"path",29),f.Kb(8,"path",30),f.Kb(9,"rect",31),f.Kb(10,"path",32),f.Kb(11,"path",33),f.Kb(12,"rect",34),f.Kb(13,"rect",35),f.Kb(14,"rect",36),f.Kb(15,"path",37),f.Kb(16,"rect",38),f.Kb(17,"rect",39),f.Kb(18,"path",40),f.Mb(19,"text",41),f.jc(20),f.Lb(),f.Mb(21,"text",42),f.jc(22),f.Lb(),f.Mb(23,"text",43),f.jc(24),f.Lb(),f.Mb(25,"text",44),f.jc(26),f.Lb(),f.Mb(27,"text",45),f.jc(28),f.Lb(),f.Lb(),f.Lb()),2&e){var n=f.Xb();f.zb(19),f.Ab("x",n.coordinates.first[0])("y",n.coordinates.first[1])("font-size",n.playerFontSize),f.zb(1),f.kc(n.getName(n.getBaseRunner(0))),f.zb(1),f.Ab("x",n.coordinates.second[0])("y",n.coordinates.second[1])("font-size",n.playerFontSize),f.zb(1),f.kc(n.getName(n.getBaseRunner(1))),f.zb(1),f.Ab("x",n.coordinates.third[0])("y",n.coordinates.third[1])("font-size",n.playerFontSize),f.zb(1),f.kc(n.getName(n.getBaseRunner(2))),f.zb(1),f.Ab("font-size",n.playerFontSize),f.zb(1),f.kc(n.getName(n.getBatter())),f.zb(1),f.Ab("font-size",n.playerFontSize),f.zb(1),f.kc(n.getName(n.getPitcher()))}}function q(e,t){if(1&e&&(f.Mb(0,"span"),f.jc(1),f.Lb()),2&e){var n=f.Xb(2);f.zb(1),f.lc("(",n.game.inning,")")}}function $(e,t){if(1&e&&(f.Mb(0,"ion-col",46),f.Mb(1,"div"),f.jc(2,"FINAL "),f.ic(3,q,2,1,"span",47),f.Lb(),f.Lb()),2&e){var n=f.Xb();f.zb(3),f.ac("ngIf",n.game.inning>8)}}function Q(e,t){if(1&e&&(f.Mb(0,"ion-col",46),f.Mb(1,"div"),f.jc(2,"INNING\xa0"),f.Mb(3,"div",48),f.Kb(4,"div",49),f.jc(5),f.Lb(),f.Lb(),f.Lb()),2&e){var n=f.Xb();f.zb(4),f.ac("innerHTML",n.game.topOfInning?"\u25b2":"\u25bc",f.ec),f.zb(1),f.lc(" ",n.game.inning,"")}}var Z,ee=((Z=function(){function e(t){u(this,e),this.settings=t,this.refresh=new f.n,this.playerFontSize="1.1rem",this.coordinates={first:[430,355],second:[328,190],third:[225,355]},console.debug("Diamond component created.")}return i(e,[{key:"ngOnInit",value:function(){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(console.debug("Diamond component initialized."),console.debug(this.game),this.settings.ready));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"isFavorite",value:function(e){return this.settings.isFavorite(e)}},{key:"toggleFavorite",value:function(e){this.settings.toggleFavorite(e),this.refresh&&(console.debug("toggleFavorite(): refreshing"),this.refresh.emit())}},{key:"inProgress",value:function(){return this.game&&!this.game.gameComplete}},{key:"getName",value:function(e){return e&&e.name?e.name:null}},{key:"getBaseRunner",value:function(e){if(this.inProgress())for(var t=0;t<this.game.basesOccupied.length;t++)if(this.game.basesOccupied[t]===e)return{name:this.game.baseRunnerNames[t],id:this.game.baseRunners[t]};return null}},{key:"getPitcher",value:function(){return this.inProgress()?this.game.topOfInning?{id:this.game.homePitcher,name:this.game.homePitcherName}:{id:this.game.awayPitcher,name:this.game.awayPitcherName}:null}},{key:"getBatter",value:function(){if(this.inProgress())return this.game.topOfInning?{id:this.game.awayBatter,name:this.game.awayBatterName}:{id:this.game.homeBatter,name:this.game.homeBatterName}}},{key:"getEmoji",value:function(e){switch(e){case"home":return String.fromCodePoint(this.game.homeTeamEmoji);case"away":return String.fromCodePoint(this.game.awayTeamEmoji);default:return""}}}]),e}()).\u0275fac=function(e){return new(e||Z)(f.Jb(G))},Z.\u0275cmp=f.Db({type:Z,selectors:[["app-diamond"]],inputs:{game:"game"},outputs:{refresh:"refresh"},decls:57,vars:21,consts:[[1,"green-card","ion-no-padding","ion-no-margin"],["color","transparent",1,"ion-no-padding"],["color","transparent"],["slot","start"],["fill","clear","shape","round","size","large",3,"click"],["name","star-outline",4,"ngIf"],["name","star",4,"ngIf"],[1,"ion-no-padding"],[1,"team-header"],[1,"team-lozenge"],[1,"team-emoji",3,"innerHTML"],["slot","end"],[0,"xmlns","svg","http://www.w3.org/2000/svg","xmlns","http://www.w3.org/2000/svg",0,"xmlns","sodipodi","http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd",0,"xmlns","inkscape","http://www.inkscape.org/namespaces/inkscape","id","diamond","version","1.0","preserveAspectRatio","xMinYMin meet","viewBox","0 120 650 390",4,"ngIf"],[1,"scorebox"],[1,"ion-align-items-end","ion-text-end"],[1,"scorebox-box"],["class","ion-text-end",4,"ngIf"],["size","12"],[1,"scorebox-border"],["id","lastUpdate",1,"rotate-display"],["name","star-outline"],["name","star"],[0,"xmlns","svg","http://www.w3.org/2000/svg","xmlns","http://www.w3.org/2000/svg",0,"xmlns","sodipodi","http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd",0,"xmlns","inkscape","http://www.inkscape.org/namespaces/inkscape","id","diamond","version","1.0","preserveAspectRatio","xMinYMin meet","viewBox","0 120 650 390"],["id","main"],["id","background","d","M 150,520 L 0,520 L 0,0 L 650,0 L 650,520 L 508,520 L 150,520 z ",0,"sodipodi","nodetypes","ccccccc",2,"fill","#00a831","fill-opacity","1","fill-rule","evenodd","stroke","none","stroke-width","1px","stroke-linecap","butt","stroke-linejoin","miter","stroke-opacity","1"],["id","dirt",0,"sodipodi","type","arc",0,"sodipodi","cx","300",0,"sodipodi","cy","752.36218",0,"sodipodi","rx","95",0,"sodipodi","ry","95","d","M 205,752.36218 A 95,95 0 0 1 395,752.36218",0,"sodipodi","start","3.1415927",0,"sodipodi","end","6.2831853",0,"sodipodi","open","true","transform","matrix(1.989102,0,0,1.978205,-268.2308,-1169.879)",2,"opacity","1","fill","#a48e28","fill-opacity","1","stroke","#85881b","stroke-width","1.04379344","stroke-linecap","butt","stroke-linejoin","bevel","stroke-miterlimit","4","stroke-dasharray","none","stroke-opacity","1"],["id","dirt-corner-right","d","M 328.5,439.48263 L 538.5,229.48266 L 538.5,439.48263 L 328.5,439.48263 z ",2,"fill","#00a831","fill-opacity","1","fill-rule","evenodd","stroke","none","stroke-width","1px","stroke-linecap","butt","stroke-linejoin","miter","stroke-opacity","1"],["id","dirt-corner-left","d","M 328.5,439.48263 L 124.5,235.48266 L 123.5,439.48263 L 328.5,439.48263 z ",2,"fill","#00a831","fill-opacity","1","fill-rule","evenodd","stroke","none","stroke-width","1px","stroke-linecap","butt","stroke-linejoin","miter","stroke-opacity","1"],["id","diamond-grass","width","168.31494","height","168.31494","x","-77.781464","y","374.03622","transform","matrix(0.707107,-0.707107,0.707107,0.707107,0,0)",2,"opacity","1","fill","#00a837","fill-opacity","1","stroke","#85881b","stroke-width","4.99999857","stroke-linecap","butt","stroke-linejoin","miter","stroke-miterlimit","4","stroke-dasharray","none","stroke-opacity","1"],["id","dirt-home",0,"sodipodi","type","arc",0,"sodipodi","cx","328",0,"sodipodi","cy","430",0,"sodipodi","rx","43",0,"sodipodi","ry","43","d","M 371 430 A 43 43 0 1 1  285,430 A 43 43 0 1 1  371 430 z",2,"opacity","1","fill","#85881b","fill-opacity","1","stroke","none","stroke-width","1","stroke-linecap","butt","stroke-linejoin","miter","stroke-miterlimit","4","stroke-dasharray","none","stroke-opacity","1"],["id","pitchers-mound",0,"sodipodi","type","arc",0,"sodipodi","cx","300",0,"sodipodi","cy","752.36218",0,"sodipodi","rx","18",0,"sodipodi","ry","18","d","M 318 752.36218 A 18 18 0 1 1  282,752.36218 A 18 18 0 1 1  318 752.36218 z","transform","translate(28.5,-432.8794)",2,"opacity","1","fill","#b56700","fill-opacity","1","stroke","#85881b","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","stroke-miterlimit","4","stroke-dasharray","none","stroke-opacity","1"],["id","pitchers-plate","width","14","height","4","x","321.5","y","317.4827",2,"opacity","1","fill","white","fill-opacity","1","stroke","none","stroke-width","3","stroke-linecap","butt","stroke-linejoin","miter","stroke-miterlimit","4","stroke-dasharray","none","stroke-opacity","1"],["id","foul-line-right","d","M 363.00993,405 C 650.37706,117.62236 650.37706,117.62236 650.37706,117.62236",2,"fill","none","fill-opacity","0.75","fill-rule","evenodd","stroke","white","stroke-width","3.01047993","stroke-linecap","square","stroke-linejoin","miter","stroke-miterlimit","4","stroke-dasharray","none","stroke-opacity","1"],["id","foul-line-left","d","M 293.77042,404.99993 C -2.1085256,109.12113 -2.1085256,109.12113 -2.1085256,109.12113",2,"fill","none","fill-opacity","0.75","fill-rule","evenodd","stroke","white","stroke-width","3","stroke-linecap","butt","stroke-linejoin","miter","stroke-miterlimit","4","stroke-dasharray","none","stroke-opacity","1"],["id","base-1","width","10.242652","height","10.242652","x","531.56042","y","-95.300102","transform","matrix(0.707107,0.707107,-0.707107,0.707107,0,0)",2,"opacity","1","fill","white","fill-opacity","1","stroke","none","stroke-width","3","stroke-linecap","butt","stroke-linejoin","miter","stroke-miterlimit","4","stroke-dasharray","none","stroke-opacity","1"],["id","base-2","width","10.242655","height","10.242655","x","369.26904","y","-95.643242","transform","matrix(0.707107,0.707107,-0.707107,0.707107,0,0)",2,"opacity","1","fill","white","fill-opacity","1","stroke","none","stroke-width","3","stroke-linecap","butt","stroke-linejoin","miter","stroke-miterlimit","4","stroke-dasharray","none","stroke-opacity","1"],["id","base-3","width","10.242649","height","10.242649","x","369.26904","y","66.99128","transform","matrix(0.707107,0.707107,-0.707107,0.707107,0,0)",2,"opacity","1","fill","white","fill-opacity","1","stroke","none","stroke-width","3","stroke-linecap","butt","stroke-linejoin","miter","stroke-miterlimit","4","stroke-dasharray","none","stroke-opacity","1"],["id","base-home","d","M 320,423 L 335,423 L 335,430.7492 L 327.72761,438 L 320,429.78055 L 320,423 z ",0,"sodipodi","nodetypes","cccccc",2,"fill","white","fill-opacity","1","stroke","none","stroke-width","3","stroke-linecap","butt","stroke-linejoin","miter","stroke-miterlimit","4","stroke-opacity","1"],["id","batters-box-right","width","15","height","35","x","340","y","410",2,"opacity","1","fill","#85881b","fill-opacity","1","stroke","white","stroke-width","1","stroke-linecap","butt","stroke-linejoin","miter","stroke-miterlimit","4","stroke-dasharray","none","stroke-opacity","1"],["id","batters-box-left","width","15","height","35","x","300","y","410",2,"opacity","1","fill","#85881b","fill-opacity","1","stroke","white","stroke-width","1","stroke-linecap","butt","stroke-linejoin","miter","stroke-miterlimit","4","stroke-dasharray","none","stroke-opacity","1"],["id","border-home","d","M 295,405 C 295.15103,402.74278 293.1875,403.97917 292.28125,403.46875 C 280.62645,419.16193 280.35712,439.683 291.625,455.65625 C 305.77503,475.71519 333.59731,480.52502 353.65625,466.375 C 373.71519,452.22497 378.52502,424.40269 364.375,404.34375 L 361,405 C 362.65625,407.375 361,405 362.65625,407.375 L 293.875,406.53125 L 295,405 z M 293.875,406.53125 L 362.65625,407.375 C 374.80016,425.99135 370.24983,450.98832 351.9375,463.90625 C 333.20494,477.12061 307.30812,472.67006 294.09375,453.9375 C 283.82751,439.38417 283.83997,421.05606 293.875,406.53125 z ",0,"sodipodi","nodetypes","ccsscccccccssc",2,"opacity","1","fill","white","fill-opacity","1","stroke","none","stroke-width","3","stroke-linecap","butt","stroke-linejoin","miter","stroke-miterlimit","4","stroke-dasharray","none","stroke-opacity","1"],["id","player-1","text-anchor","start","font-family","sans-serif","font-weight","bold","fill","white"],["id","player-2","text-anchor","middle","font-family","sans-serif","font-weight","bold","fill","white"],["id","player-3","text-anchor","end","font-family","sans-serif","font-weight","bold","fill","white"],["id","player-home","x","328","y","500","text-anchor","middle","font-family","sans-serif","font-weight","bold","fill","white"],["id","pitcher","x","328","y","296","text-anchor","middle","font-family","sans-serif","font-weight","bold","fill","white"],[1,"ion-text-end"],[4,"ngIf"],[1,"scorebox-inning"],[1,"inning-marker",3,"innerHTML"]],template:function(e,t){1&e&&(f.Mb(0,"ion-card",0),f.Mb(1,"ion-card-header",1),f.Mb(2,"ion-toolbar",2),f.Mb(3,"ion-buttons",3),f.Mb(4,"ion-button",4),f.Ub("click",(function(){return t.toggleFavorite(t.game.awayTeam)})),f.ic(5,H,1,0,"ion-icon",5),f.ic(6,W,1,0,"ion-icon",6),f.Lb(),f.Lb(),f.Mb(7,"ion-title",7),f.Mb(8,"div",8),f.Mb(9,"div",9),f.Kb(10,"span",10),f.jc(11),f.Lb(),f.jc(12," at "),f.Mb(13,"div",9),f.jc(14),f.Kb(15,"span",10),f.Lb(),f.Lb(),f.Lb(),f.Mb(16,"ion-buttons",11),f.Mb(17,"ion-button",4),f.Ub("click",(function(){return t.toggleFavorite(t.game.homeTeam)})),f.ic(18,J,1,0,"ion-icon",5),f.ic(19,V,1,0,"ion-icon",6),f.Lb(),f.Lb(),f.Lb(),f.Lb(),f.Mb(20,"ion-card-content",7),f.ic(21,Y,29,16,"svg",12),f.Mb(22,"ion-grid",13),f.Mb(23,"ion-row",14),f.Mb(24,"ion-col"),f.Mb(25,"div"),f.jc(26,"BALL\xa0"),f.Mb(27,"div",15),f.jc(28),f.Lb(),f.Lb(),f.Lb(),f.Mb(29,"ion-col"),f.Mb(30,"div"),f.jc(31,"STRIKE\xa0"),f.Mb(32,"div",15),f.jc(33),f.Lb(),f.Lb(),f.Lb(),f.Mb(34,"ion-col"),f.Mb(35,"div"),f.jc(36,"OUT\xa0"),f.Mb(37,"div",15),f.jc(38),f.Lb(),f.Lb(),f.Lb(),f.Lb(),f.Mb(39,"ion-row",14),f.Mb(40,"ion-col"),f.Mb(41,"div"),f.jc(42,"AWAY\xa0"),f.Mb(43,"div",15),f.jc(44),f.Lb(),f.Lb(),f.Lb(),f.ic(45,$,4,1,"ion-col",16),f.ic(46,Q,6,2,"ion-col",16),f.Mb(47,"ion-col"),f.Mb(48,"div"),f.jc(49,"HOME\xa0"),f.Mb(50,"div",15),f.jc(51),f.Lb(),f.Lb(),f.Lb(),f.Lb(),f.Mb(52,"ion-row"),f.Mb(53,"ion-col",17),f.Mb(54,"div",18),f.Mb(55,"div",19),f.jc(56),f.Lb(),f.Lb(),f.Lb(),f.Lb(),f.Lb(),f.Lb(),f.Lb()),2&e&&(f.zb(5),f.ac("ngIf",!t.isFavorite(t.game.awayTeam)),f.zb(1),f.ac("ngIf",t.isFavorite(t.game.awayTeam)),f.zb(4),f.hc("background-color: "+t.game.awayTeamColor),f.ac("innerHTML",t.getEmoji("away"),f.ec),f.zb(1),f.lc(" ",t.game.awayTeamNickname," "),f.zb(3),f.lc(" ",t.game.homeTeamNickname," "),f.zb(1),f.hc("background-color: "+t.game.homeTeamColor),f.ac("innerHTML",t.getEmoji("home"),f.ec),f.zb(3),f.ac("ngIf",!t.isFavorite(t.game.homeTeam)),f.zb(1),f.ac("ngIf",t.isFavorite(t.game.homeTeam)),f.zb(2),f.ac("ngIf",t.inProgress()),f.zb(7),f.kc(t.game.atBatBalls),f.zb(5),f.kc(t.game.atBatStrikes),f.zb(5),f.kc(t.game.halfInningOuts),f.zb(6),f.kc(t.game.awayScore),f.zb(1),f.ac("ngIf",t.game.gameComplete),f.zb(1),f.ac("ngIf",!t.game.gameComplete),f.zb(5),f.kc(t.game.homeScore),f.zb(5),f.kc(t.game.lastUpdate))},directives:[l.g,l.i,l.F,l.f,l.e,d.i,l.D,l.h,l.l,l.v,l.j,l.n],styles:[".green-card[_ngcontent-%COMP%]{--color:#fff;--background:#00a831}.team-header[_ngcontent-%COMP%]{color:#fff;font-size:3.5vw;font-weight:700;text-align:center}@-webkit-keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}@-webkit-keyframes fadeOut{0%{opacity:1}to{opacity:0}}@keyframes fadeOut{0%{opacity:1}to{opacity:0}}.scorebox[_ngcontent-%COMP%]{font-family:scoreboard,sans-serif;width:95%;margin-left:auto;margin-right:auto;margin-bottom:.75em;text-align:center;background-color:#000;border:5px solid #fff;font-size:3.1vw;font-weight:700}.scorebox[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5em}.scorebox[_ngcontent-%COMP%]   .scorebox-border[_ngcontent-%COMP%]{font-family:scoreboard,sans-serif;border:2px solid #ff0;display:inline-block;text-align:left;padding:.1em .5em;width:100%;height:6em}.scorebox[_ngcontent-%COMP%]   .scorebox-box[_ngcontent-%COMP%]{padding:.1em .25em}.scorebox[_ngcontent-%COMP%]   .scorebox-box[_ngcontent-%COMP%], .scorebox[_ngcontent-%COMP%]   .scorebox-inning[_ngcontent-%COMP%]{font-family:scoreboard,sans-serif;border:2px solid #ff0;display:inline-block;text-align:right;width:2.8em}.scorebox[_ngcontent-%COMP%]   .scorebox-inning[_ngcontent-%COMP%]{position:relative;padding:.1em .25em .1em .1em}.scorebox[_ngcontent-%COMP%]   .inning-marker[_ngcontent-%COMP%]{position:absolute;top:.6em;left:.4em;padding:0;margin:0;display:inline-block;font-size:60%;vertical-align:middle}.team-lozenge[_ngcontent-%COMP%]{display:inline-block;margin-top:.25em;margin-bottom:.25em}.team-emoji[_ngcontent-%COMP%]{border:1px solid #008024;border-radius:1em;display:inline-block;width:1.5em;height:1.5em}"]}),Z);function te(e,t){1&e&&(f.Mb(0,"ion-button"),f.Kb(1,"ion-spinner"),f.Lb())}function ne(e,t){if(1&e){var n=f.Nb();f.Mb(0,"ion-toolbar"),f.Mb(1,"ion-buttons",8),f.Mb(2,"ion-button"),f.Kb(3,"ion-icon"),f.Lb(),f.Lb(),f.Mb(4,"ion-segment",9),f.Ub("ionChange",(function(e){return f.dc(n),f.Xb().segmentChanged(e)})),f.Mb(5,"ion-segment-button",10),f.Mb(6,"ion-label"),f.jc(7,"All"),f.Lb(),f.Lb(),f.Mb(8,"ion-segment-button",11),f.Mb(9,"ion-label"),f.jc(10,"Active"),f.Lb(),f.Lb(),f.Mb(11,"ion-segment-button",12),f.Mb(12,"ion-label"),f.jc(13,"Favorites"),f.Lb(),f.Lb(),f.Lb(),f.Mb(14,"ion-buttons",2),f.Mb(15,"ion-button",13),f.Ub("click",(function(){return f.dc(n),f.Xb().toggleSearchbar()})),f.Kb(16,"ion-icon",14),f.Lb(),f.Lb(),f.Lb()}if(2&e){var i=f.Xb();f.zb(4),f.ac("value",i.segment)}}function ie(e,t){if(1&e){var n=f.Nb();f.Mb(0,"ion-searchbar",15),f.Ub("ionInput",(function(e){return f.dc(n),f.Xb().filterList(e)})),f.Lb()}if(2&e){var i=f.Xb();f.bc("value",i.searchTerm)}}function re(e,t){if(1&e&&(f.Mb(0,"ion-item",16),f.Mb(1,"h4"),f.jc(2,"The "),f.Mb(3,"span"),f.jc(4),f.Lb(),f.jc(5," are the Champions!"),f.Lb(),f.Lb()),2&e){var n=f.Xb(3);f.zb(3),f.hc("color: "+n.getWinner().mainColor),f.zb(1),f.kc(n.getWinner().fullName)}}function oe(e,t){if(1&e&&(f.Mb(0,"span"),f.Mb(1,"ion-item",16),f.Mb(2,"h4"),f.jc(3),f.Lb(),f.Lb(),f.ic(4,re,6,3,"ion-item",17),f.Mb(5,"ion-item",16),f.Mb(6,"h4"),f.jc(7),f.Lb(),f.Lb(),f.Lb()),2&e){var n=f.Xb(2);f.zb(3),f.lc("Season ",n.data.games.season.seasonNumber," is over."),f.zb(1),f.ac("ngIf",n.getWinner()&&n.getWinner().fullName),f.zb(3),f.lc("Next Season Starts In ",n.getNextSeasonStart(),".")}}function ae(e,t){if(1&e&&(f.Mb(0,"h4",20),f.jc(1),f.Lb()),2&e){var n=f.Xb(4);f.zb(1),f.mc("Postseason Round ",n.data.games.postseason.round.roundNumber,", Day ",n.getPlayoffDay(),"")}}function se(e,t){if(1&e&&(f.Mb(0,"ion-item",16),f.ic(1,ae,2,2,"h4",19),f.Lb()),2&e){var n=f.Xb(3);f.zb(1),f.ac("ngIf",n.data&&n.data.games)}}function ce(e,t){if(1&e&&(f.Mb(0,"h4",20),f.jc(1),f.Lb()),2&e){var n=f.Xb(4);f.zb(1),f.mc("Season ",n.data.games.season.seasonNumber,", Day ",n.data.games.sim.day,"")}}function ue(e,t){if(1&e&&(f.Mb(0,"ion-item",16),f.ic(1,ce,2,2,"h4",19),f.Lb()),2&e){var n=f.Xb(3);f.zb(1),f.ac("ngIf",n.data&&n.data.games)}}function le(e,t){if(1&e&&(f.Mb(0,"ion-item",16),f.jc(1),f.Lb()),2&e){var n=f.Xb(3);f.zb(1),f.lc(" No more active games for day ",n.data.games.sim.day,". ")}}function de(e,t){if(1&e){var n=f.Nb();f.Mb(0,"ion-col",21),f.Mb(1,"app-diamond",22),f.Ub("refresh",(function(){return f.dc(n),f.Xb(3).refreshUI()})),f.Lb(),f.Lb()}if(2&e){var i=t.$implicit;f.zb(1),f.ac("game",i)}}function he(e,t){if(1&e&&(f.Mb(0,"span"),f.ic(1,se,2,1,"ion-item",17),f.ic(2,ue,2,1,"ion-item",17),f.ic(3,le,2,1,"ion-item",17),f.Mb(4,"ion-grid"),f.Mb(5,"ion-row"),f.ic(6,de,2,1,"ion-col",18),f.Lb(),f.Lb(),f.Lb()),2&e){var n=f.Xb(2);f.zb(1),f.ac("ngIf",n.isPostseason()),f.zb(1),f.ac("ngIf",!n.isPostseason()),f.zb(1),f.ac("ngIf","active"===n.segment&&(!n.games||0===n.games.length)),f.zb(3),f.ac("ngForOf",n.games)("ngForTrackBy",n.gameId)}}function fe(e,t){if(1&e&&(f.Mb(0,"span"),f.ic(1,oe,8,3,"span",3),f.ic(2,he,7,5,"span",3),f.Lb()),2&e){var n=f.Xb();f.zb(1),f.ac("ngIf",n.isFinished()),f.zb(1),f.ac("ngIf",!n.isFinished())}}var me,ge,be,ve=[{path:"",component:(me=function(){function e(t,n){u(this,e),this.loadingController=t,this.settings=n,this.data=new K({}),this.games=[],this.segment="all",this.ready=!1,this.errors=0,this.lastUpdate=Date.now(),this.filterVisible=!1,this.stale=!1,this.staleThreshold=3e4,this.api=new I,this.countdown={hours:0,minutes:0,seconds:0}}return i(e,[{key:"ngOnInit",value:function(){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(console.debug("Stream.ngOnInit()"),this.showLoading(),this.settings.ready.finally((function(){return t.segment=t.settings.getSegment(),t.startListening(),!0}))));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"ngOnDestroy",value:function(){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.ready=!1,this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0,this.api.stop()),!0));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"showLoading",value:function(){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loading=!0;case 1:case"end":return e.stop()}}),e,this)})))}},{key:"hideLoading",value:function(){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loading=!1,this.ready=!0;case 1:case"end":return e.stop()}}),e,this)})))}},{key:"forceRefresh",value:function(e){var t=this;setTimeout((function(){t.api.retry().finally((function(){e.target.complete()}))}),500)}},{key:"toggleSearchbar",value:function(){this.filterVisible=!this.filterVisible,console.debug("Stream.toggleSearchbar(): filterVisible="+this.filterVisible)}},{key:"filterList",value:function(e){return this.searchTerm=e.srcElement.value,this.refreshUI()}},{key:"getActiveGames",value:function(){var e,t;return(null===(t=null===(e=this.data)||void 0===e?void 0:e.games)||void 0===t?void 0:t.schedule)?this.data.games.schedule.filter((function(e){return!e.gameComplete})):[]}},{key:"getFavoriteGames",value:function(){var e,t,n,i,r=this;return(null===(t=null===(e=this.data)||void 0===e?void 0:e.games)||void 0===t?void 0:t.schedule)?null===(i=null===(n=this.data)||void 0===n?void 0:n.games)||void 0===i?void 0:i.schedule.filter((function(e){return r.settings.isFavorite(e.homeTeam)||r.settings.isFavorite(e.awayTeam)})):[]}},{key:"getSegmentGames",value:function(){var e,t;console.debug("Stream.getSegmentGames()");var n=[];switch(this.segment){case"all":n=(null===(t=null===(e=this.data)||void 0===e?void 0:e.games)||void 0===t?void 0:t.schedule)||[];break;case"active":n=this.getActiveGames();break;case"favorites":n=this.getFavoriteGames();break;default:console.warn("Stream.getSegmentGames(): unhandled segment: "+this.segment),n=[]}return n.sort((function(e,t){var n=e.homeTeamNickname,i=t.homeTeamNickname;return n<i?-1:n>i?1:0}))}},{key:"isPostseason",value:function(){var e,t,n;return Boolean(null===(n=null===(t=null===(e=this.data)||void 0===e?void 0:e.games)||void 0===t?void 0:t.sim)||void 0===n?void 0:n.isPostseason())}},{key:"isFinished",value:function(){var e,t,n,i=this,r=Boolean(null===(n=null===(t=null===(e=this.data)||void 0===e?void 0:e.games)||void 0===t?void 0:t.sim)||void 0===n?void 0:n.isPostseasonComplete());return this.clockUpdater&&!r?(clearInterval(this.clockUpdater),this.clockUpdater=void 0):!this.clockUpdater&&r&&(this.clockUpdater=setInterval((function(){i.countdown=i.data.sim.countdownToNextSeason()}))),r}},{key:"getWinner",value:function(){var e,t,n,i,r=null===(i=null===(n=null===(t=null===(e=this.data)||void 0===e?void 0:e.games)||void 0===t?void 0:t.postseason)||void 0===n?void 0:n.playoffs)||void 0===i?void 0:i.winner;return r?this.data.leagues.teams.find((function(e){return e.id===r})):new U}},{key:"getPlayoffDay",value:function(){var e,t,n,i;return((null===(i=null===(n=null===(t=null===(e=this.data)||void 0===e?void 0:e.games)||void 0===t?void 0:t.postseason)||void 0===n?void 0:n.playoffs)||void 0===i?void 0:i.playoffDay)||-1)+1}},{key:"getNextSeasonStart",value:function(){return"".concat(this.countdown.hours," ").concat(1===this.countdown.hours?"hour":"hours",", ").concat(this.countdown.minutes," ").concat(1===this.countdown.minutes?"minute":"minutes",", ").concat(this.countdown.seconds," ").concat(1===this.countdown.seconds?"second":"seconds")}},{key:"refreshUI",value:function(){var e=this;console.debug("Stream.refreshUI()");var t=this.getSegmentGames();return this.searchTerm&&this.searchTerm.length>=2&&(t=t.filter((function(t){return t.homeTeamName.toLowerCase().indexOf(e.searchTerm.toLowerCase())>-1||t.awayTeamName.toLowerCase().indexOf(e.searchTerm.toLowerCase())>-1}))),this.games=t,this.games}},{key:"segmentChanged",value:function(e){e&&e.detail&&e.detail.value&&(this.segment=e.detail.value,this.settings.setSegment(this.segment)),console.debug("Stream.segmentChanged():",e),this.refreshUI()}},{key:"checkStale",value:function(){var e=this.stale;if(this.games&&this.games.length>0){var t=this.games.find((function(e){return!e.gameComplete}));this.stale=!!t&&this.lastUpdate+this.staleThreshold<Date.now()}console.debug("Stream.checkStale(): ".concat(e," -> ").concat(this.stale))}},{key:"onEvent",value:function(e){var t=this;if("error"!==e.type){this.lastUpdate=Date.now(),setTimeout((function(){t.errors=0,t.checkStale()}),1e3);var n=JSON.parse(e.data).value;this.data||(this.data=new K({}));for(var i=0,r=Object.keys(n);i<r.length;i++){var o=r[i];this.data.data[o]=n[o]}console.debug("Stream.onEvent(): current data:",this.data),this.refreshUI(),this.hideLoading()}else this.onError(e)}},{key:"onError",value:function(e){var t=this;console.debug("Stream.onError():",e),this.hideLoading(),this.loading=!1,setTimeout((function(){t.errors++,t.checkStale()}),1e3)}},{key:"startListening",value:function(){var e=this;console.debug("Stream.startListening(): opening event stream to blaseball.com"),this.showLoading();var t=this.api.start();this.subscription=t.subscribe((function(t){e.onEvent(t)}),(function(t){e.onError(t)}))}},{key:"gameId",value:function(e,t){return t&&t.id?t.id:String(e)}},{key:"schedule",get:function(){var e,t;return(null===(t=null===(e=this.data)||void 0===e?void 0:e.games)||void 0===t?void 0:t.schedule)||[]}}]),e}(),me.\u0275fac=function(e){return new(e||me)(f.Jb(l.I),f.Jb(G))},me.\u0275cmp=f.Db({type:me,selectors:[["app-live-feed"]],decls:13,vars:5,consts:[[3,"translucent"],["color","primary"],["slot","secondary"],[4,"ngIf"],["slot","fixed",3,"ionRefresh"],["pullingIcon","baseball-outline"],["name","default"],["debounce","200","showCancelButton","focus",3,"value","ionInput",4,"ngIf"],["slot","primary"],[3,"value","ionChange"],["value","all"],["value","active"],["value","favorites"],[3,"click"],["name","search-outline"],["debounce","200","showCancelButton","focus",3,"value","ionInput"],["lines","none"],["lines","none",4,"ngIf"],["size","12",4,"ngFor","ngForOf","ngForTrackBy"],["class","ion-no-margin",4,"ngIf"],[1,"ion-no-margin"],["size","12"],[3,"game","refresh"]],template:function(e,t){1&e&&(f.Mb(0,"ion-header",0),f.Mb(1,"ion-toolbar",1),f.Mb(2,"ion-title"),f.jc(3," Blases Loaded "),f.Lb(),f.Mb(4,"ion-buttons",2),f.ic(5,te,2,0,"ion-button",3),f.Lb(),f.Lb(),f.ic(6,ne,17,1,"ion-toolbar",3),f.Lb(),f.Mb(7,"ion-content"),f.Mb(8,"ion-refresher",4),f.Ub("ionRefresh",(function(e){return t.forceRefresh(e)})),f.Mb(9,"ion-refresher-content",5),f.Kb(10,"ion-spinner",6),f.Lb(),f.Lb(),f.ic(11,ie,1,1,"ion-searchbar",7),f.ic(12,fe,3,2,"span",3),f.Lb()),2&e&&(f.ac("translucent",!0),f.zb(5),f.ac("ngIf",t.loading||t.stale),f.zb(1),f.ac("ngIf",t.ready&&!t.isFinished()),f.zb(5),f.ac("ngIf",t.filterVisible),f.zb(1),f.ac("ngIf",t.ready))},directives:[l.m,l.F,l.D,l.f,d.i,l.k,l.s,l.t,l.z,l.e,l.n,l.x,l.K,l.y,l.p,l.w,l.L,l.o,l.l,l.v,d.h,l.j,ee],styles:[".danger[_ngcontent-%COMP%]{color:#fff;background-color:var(--ion-color-danger);text-align:center;padding:4em}.danger[_ngcontent-%COMP%]   .big[_ngcontent-%COMP%]{font-size:200%;font-weight:700}ion-item[_ngcontent-%COMP%], ion-searchbar[_ngcontent-%COMP%]{transition:.1s ease-in-out}"]}),me)}],pe=((be=function e(){u(this,e)}).\u0275mod=f.Hb({type:be}),be.\u0275inj=f.Gb({factory:function(e){return new(e||be)},imports:[[g.i.forChild(ve)],g.i]}),be),ye=((ge=function e(){u(this,e)}).\u0275mod=f.Hb({type:ge}),ge.\u0275inj=f.Gb({factory:function(e){return new(e||ge)},imports:[[l.G,d.b,h.a,pe,m]]}),ge)}}])}();