!function(){function n(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function e(n,e){for(var i=0;i<e.length;i++){var t=e[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{NeaV:function(i,t,r){"use strict";r.r(t),r.d(t,"StandingsPageModule",(function(){return T}));var o=r("TEn/"),a=r("ofXK"),s=r("3Pt+"),c=r("tyNb"),u=r("mrSG"),d=r("+BjT"),l=r("FqL0"),b=r("XlgL"),f=r("PRa9"),m=r("/uxM"),g=r("fXoL"),p=r("J+wX"),v=r("N1zj");function h(n,e){1&n&&(g.Nb(0,"ion-button"),g.Lb(1,"ion-spinner"),g.Mb())}function w(n,e){1&n&&(g.Nb(0,"div",15),g.lc(1,"\ud83c\udfc6"),g.Mb())}function y(n,e){1&n&&(g.Nb(0,"div",15),g.lc(1,"\xa0"),g.Mb())}function k(n,e){if(1&n){var i=g.Ob();g.Nb(0,"ion-item",11),g.Vb("click",(function(){g.ec(i);var n=e.$implicit;return g.Yb(3).openTeam(n.id)})),g.Nb(1,"ion-label",12),g.lc(2),g.Mb(),g.Nb(3,"ion-note",13),g.lc(4),g.kc(5,w,2,0,"div",14),g.kc(6,y,2,0,"div",14),g.Mb(),g.Mb()}if(2&n){var t=e.$implicit;g.jc("--background: "+t.mainColor+"; --color: "+t.mainTextColor),g.zb(2),g.mc(t.name),g.zb(1),g.jc("--color: "+t.mainTextColor),g.zb(1),g.oc(" ",t.wins,"-",t.losses," "),g.zb(1),g.bc("ngIf",t.playoffs),g.zb(1),g.bc("ngIf",!t.playoffs)}}function M(n,e){if(1&n&&(g.Nb(0,"ion-card",8),g.Nb(1,"ion-card-header"),g.Nb(2,"ion-card-subtitle"),g.lc(3),g.Mb(),g.Mb(),g.Nb(4,"ion-card-content",9),g.kc(5,k,7,9,"ion-item",10),g.Mb(),g.Mb()),2&n){var i=e.$implicit,t=g.Yb(2);g.zb(3),g.mc(i.name),g.zb(2),g.bc("ngForOf",i.teams)("ngForTrackBy",t.id)}}function N(n,e){if(1&n&&(g.Nb(0,"ion-col"),g.Nb(1,"ion-header",6),g.Nb(2,"h4"),g.lc(3),g.Mb(),g.Mb(),g.kc(4,M,6,3,"ion-card",7),g.Mb()),2&n){var i=e.$implicit,t=g.Yb();g.zb(3),g.mc(i.name),g.zb(1),g.bc("ngForOf",i.divisions)("ngForTrackBy",t.id)}}var x,O,C,j=[{path:"",component:(x=function(){function i(e,t,r,o){n(this,i),this.database=e,this.modalController=t,this.platform=r,this.stream=o,this.loading=!0,this.leagues=new b.a({}),this.standings=new l.a({}),this.tiebreakers=new f.a({}),this.data={subleagues:[]}}var t,r,o;return t=i,(r=[{key:"ngOnInit",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var e=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.platform.ready();case 2:this.stream.subscribe((function(n){return Object(u.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n instanceof d.a&&(this.leagues=n.leagues,this.standings=n.games.standings),this.postprocess();case 1:case"end":return e.stop()}}),e,this)})))}));case 3:case"end":return n.stop()}}),n,this)})))}},{key:"openTeam",value:function(n){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.debug("opening team: "+n),e.next=3,this.modalController.create({component:m.a,componentProps:{id:n}});case 3:return i=e.sent,e.next=6,i.present();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"postprocess",value:function(){var n,e,i;return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r,o,a,s,c=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null===(n=this.leagues)||void 0===n?void 0:n.leagues[0]){t.next=3;break}return t.abrupt("return");case 3:return this.data.name=r.name,o=function(n,e){var i=c.standings.wins[e.id]-c.standings.wins[n.id];return 0===i&&(i=c.tiebreakers.order.indexOf(n.id)-c.tiebreakers.order.indexOf(e.id)),i},this.tiebreakers=this.leagues.tiebreakers.find((function(n){return n.id===r.tiebreakers})),t.next=8,this.database.teams();case 8:a=t.sent,s=null===(i=null===(e=this.leagues)||void 0===e?void 0:e.subleagues)||void 0===i?void 0:i.filter((function(n){return r.subleagues.indexOf(n.id)>=0})),this.data.subleagues=s.map((function(n){var e,i,t={id:n.id,name:n.name},r=[],s=null===(i=null===(e=c.leagues)||void 0===e?void 0:e.divisions)||void 0===i?void 0:i.filter((function(e){return n.divisions.indexOf(e.id)>=0}));return t.divisions=s.sort((function(n,e){return n.name<e.name?-1:n.name>e.name?1:0})).map((function(n){var e={id:n.id,name:n.name};return e.teams=n.teams.map((function(n){return a.find((function(e){return n===e.id}))})).sort(o).map((function(n){var e={id:n.id,name:n.fullName,emoji:String.fromCodePoint(parseInt(n.emoji)),emojiColor:n.emojiColor,mainColor:n.mainColor,secondaryColor:n.secondaryColor,mainTextColor:n.contrastingMainColor,secondaryTextColor:n.contrastingSecondaryColor,wins:c.standings.wins[n.id],losses:c.standings.losses[n.id],playoffs:!1};return r.push(e),e})),e})),r.sort((function(n,e){var i=e.wins-n.wins;return 0===i&&(i=c.tiebreakers.order.indexOf(n.id)-c.tiebreakers.order.indexOf(e.id)),i})).filter((function(n,e){return e<4})).map((function(n){n.playoffs=!0})),t})),this.loading=!1;case 11:case"end":return t.stop()}}),t,this)})))}},{key:"id",value:function(n){return n&&n.id?n.id:n}}])&&e(t.prototype,r),o&&e(t,o),i}(),x.\u0275fac=function(n){return new(n||x)(g.Kb(p.a),g.Kb(o.Bb),g.Kb(o.Eb),g.Kb(v.a))},x.\u0275cmp=g.Eb({type:x,selectors:[["app-standings"]],decls:10,vars:4,consts:[[3,"translucent"],["color","primary"],["slot","secondary"],[4,"ngIf"],[1,"ion-no-margin"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"ion-no-border","ion-text-center"],["class","ion-no-padding ion-no-margin ion-margin-vertical",4,"ngFor","ngForOf","ngForTrackBy"],[1,"ion-no-padding","ion-no-margin","ion-margin-vertical"],[1,"ion-no-padding"],["lines","none","class","team-row",3,"style","click",4,"ngFor","ngForOf","ngForTrackBy"],["lines","none",1,"team-row",3,"click"],[1,"team-name"],["slot","end",1,"team-wins"],["class","playoffs",4,"ngIf"],[1,"playoffs"]],template:function(n,e){1&n&&(g.Nb(0,"ion-header",0),g.Nb(1,"ion-toolbar",1),g.Nb(2,"ion-title"),g.lc(3," Standings "),g.Mb(),g.Nb(4,"ion-buttons",2),g.kc(5,h,2,0,"ion-button",3),g.Mb(),g.Mb(),g.Mb(),g.Nb(6,"ion-content",4),g.Nb(7,"ion-grid"),g.Nb(8,"ion-row"),g.kc(9,N,5,3,"ion-col",5),g.Mb(),g.Mb(),g.Mb()),2&n&&(g.bc("translucent",!0),g.zb(5),g.bc("ngIf",e.loading),g.zb(4),g.bc("ngForOf",e.data.subleagues)("ngForTrackBy",e.id))},directives:[o.y,o.wb,o.ub,o.i,a.t,o.r,o.x,o.db,a.s,o.h,o.mb,o.q,o.j,o.l,o.m,o.k,o.E,o.K,o.S],styles:[".team-row[_ngcontent-%COMP%]{font-weight:700}.team-wins[_ngcontent-%COMP%]{font-family:monospace;font-size:1rem}.playoffs[_ngcontent-%COMP%]{width:2em;display:inline-block;text-align:end}"]}),x)}],F=((C=function e(){n(this,e)}).\u0275mod=g.Ib({type:C}),C.\u0275inj=g.Hb({factory:function(n){return new(n||C)},imports:[[c.l.forChild(j)],c.l]}),C),T=((O=function e(){n(this,e)}).\u0275mod=g.Ib({type:O}),O.\u0275inj=g.Hb({factory:function(n){return new(n||O)},imports:[[o.yb,a.c,s.e,F]]}),O)}}])}();