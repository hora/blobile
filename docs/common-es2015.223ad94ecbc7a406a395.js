(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"/uxM":function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n("mrSG"),o=n("fXoL"),s=n("J+wX"),r=n("TEn/"),a=n("BTjV"),c=n("ofXK");function l(t,e){1&t&&o.Kb(0,"ion-icon",10)}function u(t,e){1&t&&o.Kb(0,"ion-icon",11)}function d(t,e){1&t&&(o.Mb(0,"ion-item"),o.Kb(1,"ion-spinner"),o.Lb())}function f(t,e){1&t&&o.Kb(0,"ion-icon",14)}function b(t,e){if(1&t&&(o.Mb(0,"ion-item",12),o.Mb(1,"ion-label"),o.jc(2),o.Lb(),o.ic(3,f,1,0,"ion-icon",13),o.Lb()),2&t){const t=e.$implicit;o.zb(2),o.kc(t.name),o.zb(1),o.ac("ngIf",t.peanutAllergy)}}function h(t,e){1&t&&(o.Mb(0,"ion-item"),o.Kb(1,"ion-spinner"),o.Lb())}function g(t,e){1&t&&o.Kb(0,"ion-icon",14)}function m(t,e){if(1&t&&(o.Mb(0,"ion-item",12),o.Mb(1,"ion-label"),o.jc(2),o.Lb(),o.ic(3,g,1,0,"ion-icon",13),o.Lb()),2&t){const t=e.$implicit;o.zb(2),o.kc(t.name),o.zb(1),o.ac("ngIf",t.peanutAllergy)}}let p=(()=>{class t{constructor(t,e,n,i){this.database=t,this.modalController=e,this.settings=n,this.toastController=i,this.team={},this.lineup=[],this.rotation=[]}ngOnInit(){return Object(i.a)(this,void 0,void 0,(function*(){this.team=(yield this.database.teams()).find(t=>t.id===this.id)||{};const t=this.database.players(this.team.lineup).then(t=>{this.lineup=t}),e=this.database.players(this.team.rotation).then(t=>{this.rotation=t});return Promise.all([this.team,t,e])}))}close(){this.modalController.dismiss()}isFavorite(){return this.settings.isFavorite(this.id)}toggleFavorite(){return Object(i.a)(this,void 0,void 0,(function*(){const t=yield this.settings.toggleFavorite(this.id);return this.lastToast&&this.lastToast.dismiss(),this.lastToast=yield this.toastController.create({color:"primary",duration:1e3,message:t?`The ${this.team.nickname} have been favorited.`:`The ${this.team.nickname} are no longer a favorite team.`,position:"top"}),this.lastToast.present()}))}}return t.\u0275fac=function(e){return new(e||t)(o.Jb(s.a),o.Jb(r.S),o.Jb(a.a),o.Jb(r.W))},t.\u0275cmp=o.Db({type:t,selectors:[["app-team-page"]],inputs:{id:"id"},decls:25,vars:8,consts:[["color","primary","lines","none"],["slot","primary"],[3,"click"],[3,"fullscreen"],["vertical","bottom","horizontal","end","slot","fixed"],["name","star-outline",4,"ngIf"],["name","star",4,"ngIf"],["lines","none",1,"ion-no-padding","ion-padding-bottom"],[4,"ngIf"],["lines","none",4,"ngFor","ngForOf"],["name","star-outline"],["name","star"],["lines","none"],["src","assets/Noto_Emoji_Pie_1f95c.svg","slot","end",4,"ngIf"],["src","assets/Noto_Emoji_Pie_1f95c.svg","slot","end"]],template:function(t,e){1&t&&(o.Mb(0,"ion-header"),o.Mb(1,"ion-toolbar",0),o.Mb(2,"ion-buttons",1),o.Mb(3,"ion-button",2),o.Ub("click",(function(){return e.close()})),o.jc(4," Close "),o.Lb(),o.Lb(),o.Mb(5,"ion-title"),o.jc(6),o.Lb(),o.Lb(),o.Lb(),o.Mb(7,"ion-content",3),o.Mb(8,"ion-fab",4),o.Mb(9,"ion-fab-button",2),o.Ub("click",(function(){return e.toggleFavorite()})),o.ic(10,l,1,0,"ion-icon",5),o.ic(11,u,1,0,"ion-icon",6),o.Lb(),o.Lb(),o.Mb(12,"ion-list",7),o.Mb(13,"ion-item-group"),o.Mb(14,"ion-item-divider",0),o.Mb(15,"h4"),o.jc(16,"Lineup"),o.Lb(),o.Kb(17,"ion-label"),o.Lb(),o.ic(18,d,2,0,"ion-item",8),o.ic(19,b,4,2,"ion-item",9),o.Mb(20,"ion-item-divider",0),o.Mb(21,"h4"),o.jc(22,"Rotation"),o.Lb(),o.Lb(),o.ic(23,h,2,0,"ion-item",8),o.ic(24,m,4,2,"ion-item",9),o.Lb(),o.Lb(),o.Lb()),2&t&&(o.zb(6),o.kc(e.team.fullName),o.zb(1),o.ac("fullscreen",!0),o.zb(3),o.ac("ngIf",!e.isFavorite()),o.zb(1),o.ac("ngIf",e.isFavorite()),o.zb(7),o.ac("ngIf",!e.lineup||0===e.lineup.length),o.zb(1),o.ac("ngForOf",e.lineup),o.zb(4),o.ac("ngIf",!e.rotation||0===e.rotation.length),o.zb(1),o.ac("ngForOf",e.rotation))},directives:[r.p,r.O,r.f,r.e,r.M,r.l,r.m,r.n,c.i,r.v,r.t,r.s,r.u,c.h,r.q,r.r,r.I],styles:["ion-toolbar[_ngcontent-%COMP%]{--border-style:none}"]}),t})()},"2c9M":function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return c})),n.d(e,"e",(function(){return a}));const i={getEngine(){const t=window;return t.TapticEngine||t.Capacitor&&t.Capacitor.isPluginAvailable("Haptics")&&t.Capacitor.Plugins.Haptics},available(){return!!this.getEngine()},isCordova:()=>!!window.TapticEngine,isCapacitor:()=>!!window.Capacitor,impact(t){const e=this.getEngine();if(!e)return;const n=this.isCapacitor()?t.style.toUpperCase():t.style;e.impact({style:n})},notification(t){const e=this.getEngine();if(!e)return;const n=this.isCapacitor()?t.style.toUpperCase():t.style;e.notification({style:n})},selection(){this.impact({style:"light"})},selectionStart(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionStart():t.gestureSelectionStart())},selectionChanged(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionChanged():t.gestureSelectionChanged())},selectionEnd(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionEnd():t.gestureSelectionEnd())}},o=()=>{i.selection()},s=()=>{i.selectionStart()},r=()=>{i.selectionChanged()},a=()=>{i.selectionEnd()},c=t=>{i.impact(t)}},"6i10":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));const i={bubbles:{dur:1e3,circles:9,fn:(t,e,n)=>{const i=t*e/n-t+"ms",o=2*Math.PI*e/n;return{r:5,style:{top:9*Math.sin(o)+"px",left:9*Math.cos(o)+"px","animation-delay":i}}}},circles:{dur:1e3,circles:8,fn:(t,e,n)=>{const i=e/n,o=t*i-t+"ms",s=2*Math.PI*i;return{r:5,style:{top:9*Math.sin(s)+"px",left:9*Math.cos(s)+"px","animation-delay":o}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:()=>({r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}})},crescent:{dur:750,circles:1,fn:()=>({r:26,style:{}})},dots:{dur:750,circles:3,fn:(t,e)=>({r:6,style:{left:9-9*e+"px","animation-delay":-110*e+"ms"}})},lines:{dur:1e3,lines:12,fn:(t,e,n)=>({y1:17,y2:29,style:{transform:`rotate(${30*e+(e<6?180:-180)}deg)`,"animation-delay":t*e/n-t+"ms"}})},"lines-small":{dur:1e3,lines:12,fn:(t,e,n)=>({y1:12,y2:20,style:{transform:`rotate(${30*e+(e<6?180:-180)}deg)`,"animation-delay":t*e/n-t+"ms"}})}}},"J+wX":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("mrSG"),o=n("gcOT"),s=(n("dmxE"),n("oVdi")),r=n("Pnkh");class a extends r.a{constructor(t){super(t),this.defineStrings(["id","name","ritual"]),this.defineNumbers(["fate"]),this.defineBooleans(["deceased"])}}class c extends r.a{get id(){var t;return null===(t=this.data)||void 0===t?void 0:t.id}get msg(){var t;return null===(t=this.data)||void 0===t?void 0:t.msg}get expire(){var t;return(null===(t=this.data)||void 0===t?void 0:t.expire)?new Date(this.data.expire):null}}var l=n("fXoL");let u=(()=>{class t{constructor(){this.cache={},this.inFlight={},this.root="https://cors-proxy.blaseball-reference.com/database",o.a.Device.getInfo().then(t=>{"web"!==t.platform&&(this.root="https://www.blaseball.com/database")})}get(t,e){return Object(i.a)(this,void 0,void 0,(function*(){const n=Date.now(),s=this.cache[t],r=this.inFlight[t];if(!e){if(r)return console.debug("APIDatabase.get(): already in-flight: "+t),r;if(s){if(!(s.time+6e5<n))return console.debug(`APIDatabase.get(): cached: ${t} (${new Date(s.time).toISOString()})`),this.cache[t].response;console.debug("APIDatabase.get(): stale: "+t)}}const{Http:a}=o.a;return console.debug("APIDatabase.get(): uncached: "+t),this.inFlight[t]=a.request({method:"GET",url:t}).catch(e=>(console.error("APIDatabase.get(): request failed, trying again in 1s:",e),new Promise((n,o)=>{setTimeout(()=>Object(i.a)(this,void 0,void 0,(function*(){try{const e=yield a.request({method:"GET",url:t});n(e)}catch(e){o(e)}})),1e3)}))),this.inFlight[t].finally(()=>{delete this.inFlight[t]}),this.inFlight[t].then(e=>(console.debug("APIDatabase.get(): caching: "+t),this.cache[t]={url:t,response:Promise.resolve(e),time:n},e))}))}teams(t){return Object(i.a)(this,void 0,void 0,(function*(){const e=this.root+"/allTeams";try{const n=yield this.get(e,t);if(n)return n.data.map(t=>new s.a(t))}catch(n){console.error("APIDatabase.teams(): failed to get list of teams",n)}return[]}))}players(...t){return Object(i.a)(this,void 0,void 0,(function*(){let e=!1;if("boolean"==typeof t[t.length-1]&&(e=t.pop()),0===t.length)return[];const n=`${this.root}/players?ids=${t.join(",")}`;try{const t=yield this.get(n,e);if(t)return t.data.map(t=>new a(t))}catch(i){console.error("APIDatabase.players(): failed to get players",i)}return[]}))}globalEvents(t=!1){return Object(i.a)(this,void 0,void 0,(function*(){const e=this.root+"/globalEvents";try{const n=yield this.get(e,t);if(n)return n.data.map(t=>new c(t))}catch(n){console.error("APIDatabase.globalEvents(): failed to get events",n)}return[]}))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=l.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},NqGI:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));const i=async(t,e,n,i,o)=>{if(t)return t.attachViewToDom(e,n,o,i);if("string"!=typeof n&&!(n instanceof HTMLElement))throw new Error("framework delegate is missing");const s="string"==typeof n?e.ownerDocument&&e.ownerDocument.createElement(n):n;return i&&i.forEach(t=>s.classList.add(t)),o&&Object.assign(s,o),e.appendChild(s),s.componentOnReady&&await s.componentOnReady(),s},o=(t,e)=>{if(e){if(t)return t.removeViewFromDom(e.parentElement,e);e.remove()}return Promise.resolve()}},"U/uv":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("sxy2"),o=n("ItpF"),s=n("2c9M");const r=(t,e)=>{let n,r;const a=(t,i,o)=>{if("undefined"==typeof document)return;const s=document.elementFromPoint(t,i);s&&e(s)?s!==n&&(l(),c(s,o)):l()},c=(t,e)=>{n=t,r||(r=n);const o=n;Object(i.g)(()=>o.classList.add("ion-activated")),e()},l=(t=!1)=>{if(!n)return;const e=n;Object(i.g)(()=>e.classList.remove("ion-activated")),t&&r!==n&&n.click(),n=void 0};return Object(o.createGesture)({el:t,gestureName:"buttonActiveDrag",threshold:0,onStart:t=>a(t.currentX,t.currentY,s.a),onMove:t=>a(t.currentX,t.currentY,s.b),onEnd:()=>{l(!0),Object(s.e)(),r=void 0}})}},sPtc:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return a}));const i=(t,e)=>null!==e.closest(t),o=(t,e)=>"string"==typeof t&&t.length>0?Object.assign({"ion-color":!0,["ion-color-"+t]:!0},e):e,s=t=>{const e={};return(t=>void 0!==t?(Array.isArray(t)?t:t.split(" ")).filter(t=>null!=t).map(t=>t.trim()).filter(t=>""!==t):[])(t).forEach(t=>e[t]=!0),e},r=/^[a-z][a-z0-9+\-.]*:/,a=async(t,e,n,i)=>{if(null!=t&&"#"!==t[0]&&!r.test(t)){const o=document.querySelector("ion-router");if(o)return null!=e&&e.preventDefault(),o.push(t,n,i)}return!1}}}]);