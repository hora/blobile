(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{NeaV:function(n,i,o){"use strict";o.r(i),o.d(i,"StandingsPageModule",function(){return P});var e=o("TEn/"),t=o("ofXK"),s=o("3Pt+"),a=o("tyNb"),r=o("mrSG"),c=o("+BjT"),d=o("FqL0"),l=o("XlgL"),b=o("PRa9"),m=o("/uxM"),u=o("fXoL"),g=o("J+wX"),f=o("N1zj");function p(n,i){1&n&&(u.Pb(0,"ion-button"),u.Nb(1,"ion-spinner"),u.Ob())}function h(n,i){if(1&n){const n=u.Qb();u.Pb(0,"ion-item",11),u.Xb("click",function(){u.hc(n);const o=i.$implicit;return u.bc(3).openTeam(o.id)}),u.Pb(1,"ion-label",12),u.oc(2),u.Ob(),u.Pb(3,"ion-note",13),u.oc(4),u.Ob(),u.Ob()}if(2&n){const n=i.$implicit;u.mc("--background: "+n.mainColor+"; --color: "+n.mainTextColor),u.Bb(2),u.pc(n.name),u.Bb(1),u.mc("--color: "+n.mainTextColor),u.Bb(1),u.rc(" ",n.wins,"-",n.losses," ")}}function O(n,i){if(1&n&&(u.Pb(0,"ion-card",8),u.Pb(1,"ion-card-header"),u.Pb(2,"ion-card-subtitle"),u.oc(3),u.Ob(),u.Ob(),u.Pb(4,"ion-card-content",9),u.nc(5,h,5,7,"ion-item",10),u.Ob(),u.Ob()),2&n){const n=i.$implicit,o=u.bc(2);u.Bb(3),u.pc(n.name),u.Bb(2),u.ec("ngForOf",n.teams)("ngForTrackBy",o.id)}}function y(n,i){if(1&n&&(u.Pb(0,"ion-col"),u.Pb(1,"ion-header",6),u.Pb(2,"h4"),u.oc(3),u.Ob(),u.Ob(),u.nc(4,O,6,3,"ion-card",7),u.Ob()),2&n){const n=i.$implicit,o=u.bc();u.Bb(3),u.pc(n.name),u.Bb(1),u.ec("ngForOf",n.divisions)("ngForTrackBy",o.id)}}const v=[{path:"",component:(()=>{class n{constructor(n,i,o,e){this.database=n,this.modalController=i,this.platform=o,this.stream=e,this.loading=!0,this.leagues=new l.a({}),this.standings=new d.a({}),this.tiebreakers=new b.a({}),this.data={subleagues:[]}}ngOnInit(){return Object(r.a)(this,void 0,void 0,function*(){yield this.platform.ready(),this.stream.subscribe(n=>Object(r.a)(this,void 0,void 0,function*(){n instanceof c.a&&(this.leagues=n.leagues,this.standings=n.games.standings),this.postprocess()}))})}openTeam(n){return Object(r.a)(this,void 0,void 0,function*(){console.debug(`opening team: ${n}`);const i=yield this.modalController.create({component:m.a,componentProps:{id:n}});return yield i.present()})}postprocess(){var n,i,o;return Object(r.a)(this,void 0,void 0,function*(){const e=null===(n=this.leagues)||void 0===n?void 0:n.leagues[0];if(!e)return;this.data.name=e.name;const t=(n,i)=>{let o=this.standings.wins[i.id]-this.standings.wins[n.id];return 0===o&&(o=this.tiebreakers.order.indexOf(n.id)-this.tiebreakers.order.indexOf(i.id)),o};this.tiebreakers=this.leagues.tiebreakers.find(n=>n.id===e.tiebreakers);const s=yield this.database.teams(),a=null===(o=null===(i=this.leagues)||void 0===i?void 0:i.subleagues)||void 0===o?void 0:o.filter(n=>e.subleagues.indexOf(n.id)>=0);this.data.subleagues=a.map(n=>{var i,o;const e={id:n.id,name:n.name},a=[],r=null===(o=null===(i=this.leagues)||void 0===i?void 0:i.divisions)||void 0===o?void 0:o.filter(i=>n.divisions.indexOf(i.id)>=0);return e.divisions=r.sort((n,i)=>n.name<i.name?-1:n.name>i.name?1:0).map(n=>{const i={id:n.id,name:n.name};return i.teams=n.teams.map(n=>s.find(i=>n===i.id)).sort(t).map(n=>{const i={id:n.id,name:n.fullName,emoji:n.emoji,emojiColor:n.emojiColor,mainColor:n.mainColor,secondaryColor:n.secondaryColor,mainTextColor:n.contrastingMainColor,secondaryTextColor:n.contrastingSecondaryColor,wins:this.standings.wins[n.id],losses:this.standings.losses[n.id],playoffs:!1};return a.push(i),i}),i}),a.sort((n,i)=>{let o=i.wins-n.wins;return 0===o&&(o=this.tiebreakers.order.indexOf(n.id)-this.tiebreakers.order.indexOf(i.id)),o}).filter((n,i)=>i<4).map(n=>{n.playoffs=!0}),e}),this.loading=!1})}id(n){return n&&n.id?n.id:n}}return n.\u0275fac=function(i){return new(i||n)(u.Mb(g.a),u.Mb(e.T),u.Mb(e.U),u.Mb(f.a))},n.\u0275cmp=u.Gb({type:n,selectors:[["app-standings"]],decls:10,vars:4,consts:[[3,"translucent"],["color","primary"],["slot","secondary"],[4,"ngIf"],[1,"ion-no-margin"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"ion-no-border","ion-text-center"],["class","ion-no-padding ion-no-margin ion-margin-vertical",4,"ngFor","ngForOf","ngForTrackBy"],[1,"ion-no-padding","ion-no-margin","ion-margin-vertical"],[1,"ion-no-padding"],["lines","none","class","team-row",3,"style","click",4,"ngFor","ngForOf","ngForTrackBy"],["lines","none",1,"team-row",3,"click"],[1,"team-name"],["slot","end",1,"team-wins"]],template:function(n,i){1&n&&(u.Pb(0,"ion-header",0),u.Pb(1,"ion-toolbar",1),u.Pb(2,"ion-title"),u.oc(3," Standings "),u.Ob(),u.Pb(4,"ion-buttons",2),u.nc(5,p,2,0,"ion-button",3),u.Ob(),u.Ob(),u.Ob(),u.Pb(6,"ion-content",4),u.Pb(7,"ion-grid"),u.Pb(8,"ion-row"),u.nc(9,y,5,3,"ion-col",5),u.Ob(),u.Ob(),u.Ob()),2&n&&(u.ec("translucent",!0),u.Bb(5),u.ec("ngIf",i.loading),u.Bb(4),u.ec("ngForOf",i.data.subleagues)("ngForTrackBy",i.id))},directives:[e.o,e.P,e.N,e.e,t.i,e.k,e.n,e.C,t.h,e.d,e.I,e.j,e.f,e.h,e.i,e.g,e.q,e.t,e.w],styles:[".team-row[_ngcontent-%COMP%]{font-weight:700}.team-wins[_ngcontent-%COMP%]{font-family:monospace;font-size:1rem}.playoffs[_ngcontent-%COMP%]{width:2em;display:inline-block;text-align:end}"]}),n})()}];let w=(()=>{class n{}return n.\u0275mod=u.Kb({type:n}),n.\u0275inj=u.Jb({factory:function(i){return new(i||n)},imports:[[a.j.forChild(v)],a.j]}),n})(),P=(()=>{class n{}return n.\u0275mod=u.Kb({type:n}),n.\u0275inj=u.Jb({factory:function(i){return new(i||n)},imports:[[e.Q,t.b,s.a,w]]}),n})()}}]);
//# sourceMappingURL=standings-standings-module-es2015.fb0b3a866d24c08fa817.js.map